!function(){"use strict";class e{constructor(){}static init(){Laya.ClassUtils.regClass}}e.width=720,e.height=1280,e.scaleMode="fixedwidth",e.screenMode="none",e.alignV="top",e.alignH="left",e.startScene="LoadingView.scene",e.sceneRoot="",e.debug=!1,e.stat=!1,e.physicsDebug=!1,e.exportSceneToJson=!0,e.init();class t{constructor(){}init(){this.eventDispatcher=new Laya.EventDispatcher}dispatch(e,t=null){this.eventDispatcher||this.init(),this.eventDispatcher.event(e,t)}on(e,t,i){this.eventDispatcher||this.init(),this.eventDispatcher.on(e,i,t)}off(e,t,i){this.eventDispatcher||this.init(),this.eventDispatcher.off(e,i,t)}static get Ins(){return null==t._ins&&(t._ins=new t),t._ins}}class i{}i.RES_LOAD_FINISHED=10001,i.ENEMY_DEAD=10002,i.UPDATE_SUBLEVEL=10003,i.UPDATE_BULLET=10004,i.UPDATE_BOMB=10005,i.UPDATE_SHOOT=10006,i.ALL_SLEEP=10007,i.WIN_BOMB=10008,i.BULLET_DESTROY=10009,i.CLEAR_COLL=10010,i.REVIVE=10011,i.RESTART=10012,i.WIN_FLAG=10013,i.TRUE_BOMB=10014,i.FINISH_ENTER=10015,i.GIFT_REDEEM=100156,i.GAMEVIEW_ENTER=10017,i.REFRESH_LEVEL=10018,i.BOMB_EFFECT=10019;class s{}s.QResType={LoadingViewRes:1,UIRes:2,Config:4,Scene3D:8,Subpackage:16},s.QCfgType={GameConfig:1,ShareConfig:2},s.QCfgName={1:"game_config",2:"share_config"},s.QCoinUnitCon=["K","M","B","T","AA","AB","AC","AD","AE","AF","AG","AH","AI","AJ","AK","AL","AM","AN","AO","AP","AQ","AR","AS","AT","AU","AV","AW","AX","AY","AZ"];class a{static get Ins(){return null==a._ins&&(a._ins=new a),a._ins}registerEvent(){}unregisterEvent(){}init(){}loadLoadingRes(){var e=["loadingView/背景.jpg","loadingView/【健康游戏忠告】拷贝.png","loadingView/LOGO.png","loadingView/进度底.png","loadingView/进度底$bar.png"];Laya.loader.load(e,Laya.Handler.create(this,this.completeHandler,[s.QResType.LoadingViewRes]))}clearLoadingRes(){}loadRes(){this.loadUIRes()}loadUIRes(){var e=["res/atlas/rank.atlas","res/atlas/UI/collectView.atlas","res/atlas/UI/freeBombView.atlas","res/atlas/UI/gameView.atlas","res/atlas/UI/giftView.atlas","res/atlas/UI/mainView.atlas","res/atlas/UI/moreGameView.atlas","res/atlas/UI/reviveView.atlas","res/atlas/UI/teachView.atlas","res/atlas/UI/victoryView.atlas"];Laya.loader.load(e,Laya.Handler.create(this,this.completeHandler,[s.QResType.UIRes]))}completeHandler(e){console.log("load complete "+e),t.Ins.dispatch(i.RES_LOAD_FINISHED,e)}}class n{constructor(){}static get Ins(){return null==n._ins&&(n._ins=new n),n._ins}callback(e,t=!0){e&&e.runWith(t)}getHeightWidthRatio(){return Laya.Browser.height/Laya.Browser.width/(e.height/e.width)}getScreenWidth(){return Laya.stage.displayWidth}getScreenHeight(){return Laya.stage.displayHeight}getCenterX(){return Laya.stage.displayWidth/2}getCenterY(){return Laya.stage.displayHeight/2}swap(e,t,i){var s=e[t];e[t]=e[i],e[i]=s}setMiddle(e,t){var i=e.width*e.scaleX,s=e.height*e.scaleY;e.x=t.width/2-i/2,e.y=t.height/2-s/2}setScale(e,t,i){void 0===i&&(i=0);var s=(t.width-2*i)/e.width,a=(t.height-2*i)/e.height,n=Math.min(s,a);e.scaleX=e.scaleY=n}setScaleAndMiddle(e,t,i){void 0===i&&(i=0),this.setScale(e,t,i),this.setMiddle(e,t)}getDeviceXValue(e){return console.log(Laya.Browser.clientWidth),e/Laya.stage.designWidth*Laya.Browser.clientWidth}getDeviceYValue(e){return console.log(Laya.Browser.clientHeight),e/Laya.stage.designHeight*Laya.Browser.clientHeight}getRandomOne(e){return e[Math.floor(Math.random()*e.length)]}getRandomInt(e,t){var i=t-e,s=Math.random(),a=e+Math.round(i*s);return Math.ceil(a)}getRandomNum(e,t){return e+(t-e)*Math.random()}getRandomIndex(e){for(var t=0,i=0;i<e.length;i++)t+=e[i];var s=Math.random()*t;for(i=0;i<e.length;i++){if(s<e[i])return i;s-=e[i]}return 0}FpsOpenFun(e){return!0}getObjectSize(e){var t=0;for(var i in e)e[i],t++;return t}isObjectEmpty(e){return null==e||0==this.getObjectSize(e)}isStringEmpty(e){return null==e||0==e.length}isNullOrEmpty(e){return null==e||null==e||"string"==typeof e&&""==e}getIntFromStr(e){for(var t,i=0;i<e.length;i++)if((t=e.charCodeAt(i))>=48&&t<=57)return parseInt(e.substr(i));return-1}getFixedNumber(e,t){void 0===t&&(t=1);var i=e.toString();if(-1==i.indexOf("."))return e;var s=i.split("."),a=s[0],n=s[1];return n=n.substr(0,t),parseFloat(a+"."+n)}clamp(e,t,i){return void 0===t&&(t=Number.MIN_VALUE),void 0===i&&(i=Number.MAX_VALUE),e<t?t:e>i?i:e}radianToAngle(e){return e/Math.PI*180}angleToRadian(e){return e/180*Math.PI}trimRadian(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}trimAngle(e){for(;e<0;)e+=360;for(;e>360;)e-=360;return e}getTimeStr(e){var t=e%1e3,i=Math.floor(e/1e3),s=Math.floor(i/60);return i-=60*s,this.getIntStr(s,2)+":"+this.getIntStr(i,2)+":"+this.getIntStr(t,3)}getIntStr(e,t){for(var i=e.toString();i.length<t;)i="0"+i;return i}getTimeStr2(e){var t=Math.floor(e/1e3),i=Math.floor(t/60);return i+":"+(t-=60*i)}getWayPointMiddle(e){var t=this.getPointsByPointStr(e.points),i=t[0],s=t[t.length-1],a=new Laya.Point(e.x+i.x,e.y+i.y),n=new Laya.Point(e.x+s.x,e.y+s.y);return new Laya.Point((a.x+n.x)/2,(a.y+n.y)/2)}getPointsByPointStr(e){var t=[],i=e.split(",");i.length%2>0&&i.pop();for(var s=0;s<i.length;s+=2)t.push(new Laya.Point(parseInt(i[s]),parseInt(i[s+1])));return t}getRotateDirection(e,t){var i=t-e,s=i>0?1:-1;return Math.abs(i)>Math.PI&&(s*=-1),s}getcount_downStr(e){var t="",i=parseInt((e/3600).toString()),s=parseInt(((e-3600*i)/60).toString()),a=parseInt((e-3600*i-60*s).toString());return t+=i>0?this.getIntStr(i,2)+":":"00:",(t+=s>0?this.getIntStr(s,2)+":":"00:")+(a>0?this.getIntStr(a,2):"00")}getToDayStamp(e){var t=new Date;return t.setTime(e),t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.getTime()}isSameDay(e,t){var i=new Date,s=new Date;return i.setTime(e),s.setTime(t),i.getFullYear()==s.getFullYear()&&i.getMonth()==s.getMonth()&&i.getDate()==s.getDate()}changeObjtoStr(e){if(!e)return"";var t="";for(var i in e)t+=i+"="+e[i]+"&";return t.slice(0,-1)}changeStrToObj(e){if(!e)return{};for(var t={},i=e.split("&"),s=0;s<i.length;s++){var a=i[s].split("=");t[a[0]]=a[1]}return t}getWeekDate(e,t){t=this.clamp(t,0,6);var i=new Date(e);i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0);var s=t-i.getDay();return s>0&&(s-=7),i.setTime(i.getTime()+864e5*s),i}removeValueFromArray(e,t){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1)}removeValuesFromArray(e,t){for(var i=e.length-1;i>=0;i--)this.removeValueFromArray(e[i],t)}getIndexArray(e,t=!0){for(var i=[],s=0;s<e;s++)t?i.push(s):i.push(s+1);return i}getFillArray(e,t){for(var i=[],s=0;s<e;s++)i.push(t);return i}getTooLongText(e,t){return e.length<=t?e:e.substr(0,t-1)+"…"}setCircleMask(e,t,i){void 0===i&&(i=90);var s=e.mask;null==s&&((s=new Laya.Sprite).rotation=i,s.pos(e.width/2,e.height/2),e.mask=s),s.graphics.clear(),t>0?(e.visible=!0,s.graphics.drawPie(0,0,e.width/2,0,360*t,"#ffffff")):e.visible=!1}span(e,t,i,s){return void 0===t&&(t="#ffffff"),void 0===i&&(i=24),void 0===s&&(s=!1),"<span style='color:"+t+" ;"+(s?"font-weight:bold;":"")+"font-size:"+i+"px;'>"+e+"</span>"}font(e,t,i){return void 0===i&&(i=24),"<span style='color:"+t+" ;font-size:"+i+"px'>"+e+"</span>"}javaFormat(e,t){for(var i=0;i<t.length&&-1!=e.indexOf("%s");i++)e=e.replace("%s",t[i]);return e}deepClone(e){var t=Array.isArray(e)?[]:{};if(e&&"object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(e[i]&&"object"==typeof e[i]?t[i]=this.deepClone(e[i]):t[i]=e[i]);return t}isJsonObj(e){try{if("object"==typeof JSON.parse(e))return!0}catch(e){}return!1}arrayBufferToString(e){for(var t=new Uint8Array(e),i="",s=t.byteLength,a=0;a<s;++a)i+=String.fromCharCode(t[a]);return i}btoa(e){for(var t,i,s=String(e),a=0,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="";s.charAt(0|a)||(n="=",a%1);o+=n.charAt(63&t>>8-a%1*8))(i=s.charCodeAt(a+=.75))>255&&(t=t<<8|i);return o}arrayPlus(e,t){for(var i=[],s=Math.max(e.length,t.length),a=0;a<s;a++){var n=isNaN(e[a])?0:e[a],o=isNaN(t[a])?0:t[a];i[a]=n+o}return i}localNormalize(e,t=1){e.localPosition=(new Laya.Vector3).clone(),e.localRotation=Laya.Quaternion.DEFAULT.clone(),e.localScale=new Laya.Vector3(t,t,t)}setCameraFov(e){Laya.stage.scaleMode==Laya.Stage.SCALE_FIXED_WIDTH&&(e.fieldOfView*=this.getHeightWidthRatio())}isInArray(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}getIdByPrefix(e,t){var i=e.indexOf(t);return-1!=i?(i+=t.length,parseInt(e.substring(i,e.length))):-1}Vec3MultiplyConst(e,t,i){return i.x=e.x*t,i.y=e.y*t,i.z=e.z*t,i}timestampToDate(e){var t=new Date(1e3*e);return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()}ArrQuchong(e){for(var t=[],i=0;i<e.length;i++){for(var s=i+1;s<e.length;s++)e[i]===e[s]&&++i;t.push(e[i])}return t}getCoinNumType(e){let t=e;if(e<1e4)return String(e);for(let i=0;i<90;i++)if(e>=Math.pow(10,3*i)&&e<Math.pow(10,3*(i+1)))switch(i){case 0:t=Math.floor(e);break;default:t=(e/Math.pow(10,3*i)).toFixed(0)+s.QCoinUnitCon[i-1]}return String(t)}}class o{constructor(e){this.addToStage=null,this.dicSubUI=null,this.uiName=null,this.scene=null,this.addToStage=!0,this.dicSubUI={},this.uiName=e}start(){this.registerEvent(),this.init(),this.scene.width=n.Ins.getScreenWidth(),this.scene.height=n.Ins.getScreenHeight(),this.addToStage&&Laya.stage.addChild(this.scene),this.postInit()}destroy(){this.unregisterEvent(),this.doDestroy(),Laya.timer.clearAll(this),n.Ins.isNullOrEmpty(this.scene)||Laya.stage.removeChild(this.scene)}setActive(e){this.scene.visible=e}init(){}postInit(){}registerEvent(){}unregisterEvent(){}doEnabled(){}doDisabled(){}doDestroy(){}setParam(e){}}var r,l,h,c,d=Laya.View,m=Laya.ClassUtils.regClass;!function(e){class t extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{top:0,skin:"UI/mainView/img_black.png",right:0,left:0,bottom:0,alpha:.5},compId:3},{type:"Image",props:{width:564,skin:"UI/freeBombView/底板.png",sizeGrid:"44,46,47,40",height:400,centerY:-200,centerX:0},compId:4,child:[{type:"Image",props:{y:-86,x:227,width:140,skin:"UI/giftView/炸弹.png",height:136},compId:5},{type:"Text",props:{y:125,x:0,width:564,var:"desc",text:"Get free bomb after 05:00",height:35,fontSize:35,font:"SimHei",color:"#047E99",align:"center",runtime:"Laya.Text"},compId:6},{type:"Image",props:{y:200,x:169.5,skin:"UI/freeBombView/是否立即获得？.png"},compId:7},{type:"Button",props:{y:272,x:121,var:"useBtn",stateNum:1,skin:"UI/freeBombView/按钮122.png"},compId:8,child:[{type:"Image",props:{skin:"UI/freeBombView/立即使用.png",centerY:0,centerX:0},compId:9}]},{type:"Button",props:{y:416,var:"closeBtn",stateNum:1,skin:"UI/freeBombView/再等等.png",centerX:0},compId:10}]}],loadList:["UI/mainView/img_black.png","UI/freeBombView/底板.png","UI/giftView/炸弹.png","UI/freeBombView/是否立即获得？.png","UI/freeBombView/按钮122.png","UI/freeBombView/立即使用.png","UI/freeBombView/再等等.png"],loadList3D:[]},e.FreeBombViewUI=t,m("ui.FreeBombViewUI",t);class i extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Box",props:{var:"normalLevel",top:0,right:0,left:0,bottom:0},compId:41,child:[{type:"Sprite",props:{y:0,x:0,width:720,var:"touchNode",height:1280},compId:91},{type:"Box",props:{y:166,width:366,var:"lvlBox",height:83,centerX:0},compId:9,child:[{type:"Image",props:{y:30,x:57,skin:"UI/gameView/进度底.png"},compId:14,child:[{type:"Image",props:{y:2,x:2,var:"lvl1To2",skin:"UI/gameView/进度底$bar.png"},compId:15}]},{type:"Image",props:{y:32,x:147,skin:"UI/gameView/进度底.png"},compId:19,child:[{type:"Image",props:{y:3,x:2,var:"lvl2To3",skin:"UI/gameView/进度底$bar.png"},compId:39}]},{type:"Image",props:{y:30,x:237,skin:"UI/gameView/进度底.png"},compId:80,child:[{type:"Image",props:{y:3,x:2,var:"lvl3To4",skin:"UI/gameView/进度底$bar.png"},compId:81}]},{type:"Image",props:{y:7.5,x:8,skin:"UI/gameView/进度等级底.png"},compId:10,child:[{type:"Image",props:{y:3,x:3,var:"lvl1",skin:"UI/gameView/进度已过.png"},compId:11},{type:"Text",props:{y:12,x:12,width:45,var:"preLvlNum",valign:"middle",text:"1",height:48,fontSize:40,font:"Microsoft YaHei",color:"#FFFFFF",bold:!0,align:"center",runtime:"Laya.Text"},compId:12}]},{type:"Image",props:{y:7.5,x:96.5,skin:"UI/gameView/进度等级底.png"},compId:16,child:[{type:"Image",props:{y:3,x:3,var:"lvl2",skin:"UI/gameView/进度已过.png"},compId:17},{type:"Text",props:{y:12,x:12,width:45,var:"currentLvlNum",valign:"middle",text:"2",height:48,fontSize:40,font:"Microsoft YaHei",color:"#FFFFFF",bold:!0,align:"center",runtime:"Laya.Text"},compId:18}]},{type:"Image",props:{y:7.5,x:185,skin:"UI/gameView/进度等级底.png"},compId:21,child:[{type:"Image",props:{y:3,x:3,var:"lvl3",skin:"UI/gameView/进度已过.png"},compId:40},{type:"Text",props:{y:12,x:12,width:45,var:"nextLvlNum",valign:"middle",text:"3",height:48,fontSize:40,font:"Microsoft YaHei",color:"#FFFFFF",bold:!0,align:"center",runtime:"Laya.Text"},compId:23}]},{type:"Image",props:{y:7,x:273.5,skin:"UI/gameView/进度等级底.png"},compId:82,child:[{type:"Image",props:{y:3,x:3,var:"lvl4",skin:"UI/gameView/进度已过.png"},compId:83},{type:"Text",props:{y:12,x:12,width:45,valign:"middle",text:"4",height:48,fontSize:40,font:"Microsoft YaHei",color:"#FFFFFF",bold:!0,align:"center",runtime:"Laya.Text"},compId:84}]},{type:"Text",props:{y:-62,x:192,width:74,var:"lvlNum",valign:"middle",text:"41",height:43,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:8},{type:"Image",props:{y:102,x:148,var:"reviveCntDown",skin:"UI/gameView/倒计时底.png",centerX:-1},compId:29,child:[{type:"Text",props:{y:13,x:5,width:58,var:"cntDownNum",valign:"middle",text:"3",rotation:0,height:40,fontSize:40,font:"Microsoft YaHei",color:"#FFFFFF",bold:!0,align:"center",runtime:"Laya.Text"},compId:30},{type:"Image",props:{y:34.5,x:34.5,var:"cntDownImg",skin:"UI/gameView/倒计时进度.png",pivotY:32.5,pivotX:32.5},compId:31,child:[{type:"Sprite",props:{var:"cntDownMask",rotation:-90,renderType:"mask"},compId:32}]}]},{type:"Text",props:{y:-62,x:129,width:74,valign:"middle",text:"Lv.",height:44,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:126}]},{type:"Image",props:{skin:"UI/gameView/剩余底.png",sizeGrid:"64,48,94,34",left:41,bottom:325},compId:25,child:[{type:"Image",props:{y:-42.5,x:15,width:74,var:"bulletIcon",skin:"UI/gameView/球.png",height:73},compId:26},{type:"Text",props:{y:105,x:0,width:100,var:"bulletNum",valign:"middle",text:"4",height:36,fontSize:36,font:"SimHei",color:"#000000",align:"center",runtime:"Laya.Text"},compId:27},{type:"Image",props:{y:61.5,x:21,skin:"UI/gameView/剩余.png"},compId:28}]},{type:"Button",props:{var:"bombIcon",stateNum:1,skin:"UI/gameView/炸弹底.png",right:55,bottom:365},compId:33,child:[{type:"Image",props:{y:9,x:13,skin:"UI/gameView/炸弹.png"},compId:34},{type:"Image",props:{y:2,x:79,var:"bombCntBg",skin:"UI/gameView/炸弹数量底.png"},compId:35,child:[{type:"Text",props:{y:3,x:3,width:22,var:"bombNum",valign:"middle",text:"3",height:24,fontSize:24,font:"SimHei",color:"#FFFFFF",align:"center",runtime:"Laya.Text"},compId:36}]},{type:"Image",props:{y:104,x:-4,skin:"UI/gameView/点击装载底.png"},compId:37,child:[{type:"Text",props:{y:1,x:1,width:109,var:"bombDesc",valign:"middle",text:"Load",height:32,fontSize:24,font:"SimHei",color:"#000000",bold:!0,align:"center",runtime:"Laya.Text"},compId:38}]}]},{type:"Button",props:{x:610,width:110,var:"goldArc",stateNum:1,labelSize:35,labelFont:"SimHei",labelColors:"#000000",label:"Golden",height:63,bottom:577},compId:92},{type:"Button",props:{x:610,width:110,var:"normalArc",stateNum:1,labelSize:35,labelFont:"SimHei",labelColors:"#000000",label:"Normal",height:63,bottom:516},compId:93},{type:"Sprite",props:{y:1160,x:33,var:"bulletPos"},compId:94},{type:"Image",props:{width:720,var:"bombEffect",skin:"UI/gameView/FNSS_fair01.png",left:0,height:309,bottom:0},compId:95},{type:"Button",props:{y:287,x:90,var:"giftBtn",stateNum:1,skin:"UI/giftView/回流礼包小.png",anchorY:.5,anchorX:.5},compId:96,child:[{type:"Image",props:{y:109,x:-6,var:"giftCntDown",skin:"UI/gameView/点击装载底.png"},compId:97,child:[{type:"Text",props:{y:0,x:1,width:110,var:"giftDesc",valign:"middle",text:"Claim",height:32,fontSize:24,font:"SimHei",color:"#000000",bold:!0,align:"center",runtime:"Laya.Text"},compId:98}]}]},{type:"Box",props:{var:"step3",top:0,right:0,left:0,bottom:0},compId:69,child:[{type:"Button",props:{var:"touchBtnBulletNum",top:0,stateNum:1,skin:"UI/teachView/引导3.png",right:0,left:0,bottom:0},compId:79,child:[{type:"Image",props:{y:744,x:183,skin:"UI/teachView/每关都有子弹限制哦！让我们开始吧！.png"},compId:71}]}]}]},{type:"Box",props:{var:"teach1",top:0,right:0,left:0,bottom:0},compId:43,child:[{type:"Button",props:{y:361,x:69,width:581,var:"touchBtnShoot",stateNum:1,height:589},compId:47},{type:"Box",props:{var:"shootBox",top:0,right:0,left:0,bottom:0},compId:101,child:[{type:"Image",props:{top:0,skin:"UI/teachView/引导1.png",right:0,left:0,bottom:0},compId:44,child:[{type:"Image",props:{skin:"UI/teachView/椭圆11.png",centerY:-164,centerX:0,alpha:.5800000000000001},compId:116},{type:"Image",props:{skin:"UI/teachView/手点击1.png",centerY:-95,centerX:57},compId:117}]},{type:"Image",props:{y:266,x:215.5,skin:"UI/teachView/瞄准橡皮君将他们全部弹走！.png"},compId:50},{type:"Text",props:{y:102,x:369,width:74,valign:"middle",text:"1",height:48,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:52}]},{type:"Text",props:{y:103,x:308,width:74,valign:"middle",text:"Lv.",height:44,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:127}]},{type:"Box",props:{var:"teach2",top:0,right:0,left:0,bottom:0},compId:55,child:[{type:"Box",props:{var:"step1",top:0,right:0,left:0,bottom:0},compId:56,child:[{type:"Box",props:{var:"step1Slide",top:0,right:0,left:0,bottom:0},compId:102,child:[{type:"Image",props:{top:0,skin:"UI/teachView/引导2.png",right:0,left:0,bottom:0},compId:57,child:[{type:"Image",props:{y:282,x:181,skin:"UI/teachView/滑动屏幕来移动镜头！.png"},compId:58}]},{type:"Image",props:{y:525,x:56,width:470,skin:"UI/teachView/右箭头.png",sizeGrid:"79,153,67,53"},compId:61},{type:"Image",props:{y:611,x:514,var:"hand2",skin:"UI/teachView/手2.png"},compId:62},{type:"Button",props:{y:361,x:0,width:720,var:"touchBtnSlideH",stateNum:1,right:0,left:0,height:521},compId:77}]},{type:"Box",props:{y:0,x:0,var:"step1Shoot",top:0,right:0,left:0,bottom:0},compId:103,child:[{type:"Image",props:{top:0,skin:"UI/teachView/引导1.png",right:0,left:0,bottom:0},compId:104,child:[{type:"Image",props:{skin:"UI/teachView/手点击1.png",centerY:-99,centerX:57},compId:119},{type:"Image",props:{skin:"UI/teachView/椭圆11.png",centerY:-168,centerX:0,alpha:.5800000000000001},compId:118}]},{type:"Image",props:{y:266,x:215.5,skin:"UI/teachView/瞄准橡皮君将他们全部弹走！.png"},compId:107},{type:"Button",props:{y:361,x:69,width:581,var:"step1ShootBtn",stateNum:1,height:589},compId:122}]}]},{type:"Box",props:{y:0,x:0,var:"step2",top:0,right:0,left:0,bottom:0},compId:65,child:[{type:"Box",props:{var:"step2Slide",top:0,right:0,left:0,bottom:0},compId:110,child:[{type:"Image",props:{top:0,skin:"UI/teachView/引导4.png",right:0,left:0,bottom:0},compId:66,child:[{type:"Image",props:{y:282,x:181,skin:"UI/teachView/滑动屏幕来移动镜头！.png"},compId:67},{type:"Image",props:{y:361,x:426,width:519,skin:"UI/teachView/右箭头.png",sizeGrid:"70,146,77,73",rotation:90},compId:68},{type:"Image",props:{y:885,x:325,skin:"UI/teachView/手2.png"},compId:89}]},{type:"Button",props:{y:361,x:0,width:720,var:"touchBtnSlideV",stateNum:1,right:0,left:0,height:521},compId:78}]},{type:"Box",props:{y:0,x:0,var:"step2Shoot",top:0,right:0,left:0,bottom:0},compId:111,child:[{type:"Image",props:{top:-1,skin:"UI/teachView/引导1.png",right:0,left:0,bottom:0},compId:112,child:[{type:"Image",props:{skin:"UI/teachView/椭圆11.png",centerY:-193,centerX:0,alpha:.2},compId:120},{type:"Image",props:{skin:"UI/teachView/手点击1.png",centerY:-133,centerX:57},compId:121}]},{type:"Image",props:{y:266,x:215.5,skin:"UI/teachView/瞄准橡皮君将他们全部弹走！.png"},compId:113},{type:"Button",props:{y:361,x:69,width:581,var:"step2ShootBtn",stateNum:1,height:589},compId:123}]}]},{type:"Text",props:{y:102,x:370,width:74,valign:"middle",text:"2",height:48,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:60},{type:"Text",props:{y:102,x:307,width:74,valign:"middle",text:"Lv.",height:44,fontSize:45,font:"SimHei",color:"#FFFFFF",bold:!0,align:"left",runtime:"Laya.Text"},compId:128}]},{type:"Box",props:{y:10,x:10,width:240,var:"InstreamBox",top:40,left:480,height:135},compId:129}],animations:[{nodes:[{target:116,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:0},{value:.3,tweenMethod:"linearNone",tween:!0,target:116,key:"alpha",index:10}]}},{target:117,keyframes:{skin:[{value:"UI/teachView/手点击1.png",tweenMethod:"linearNone",tween:!1,target:117,key:"skin",index:0},{value:"UI/teachView/手点击.png",tweenMethod:"linearNone",tween:!1,target:117,key:"skin",index:10}]}}],name:"ani1",id:1,frameRate:24,action:0},{nodes:[{target:61,keyframes:{width:[{value:235,tweenMethod:"linearNone",tween:!0,target:61,key:"width",index:0},{value:470,tweenMethod:"linearNone",tween:!0,target:61,key:"width",index:20}]}},{target:62,keyframes:{x:[{value:291,tweenMethod:"linearNone",tween:!0,target:62,key:"x",index:0},{value:514,tweenMethod:"linearNone",tween:!0,target:62,key:"x",index:20}]}}],name:"ani2",id:2,frameRate:24,action:0},{nodes:[{target:68,keyframes:{x:[{value:426,tweenMethod:"linearNone",tween:!0,target:68,key:"x",index:0}],width:[{value:235,tweenMethod:"linearNone",tween:!0,target:68,key:"width",index:0},{value:519,tweenMethod:"linearNone",tween:!0,target:68,key:"width",index:20}]}},{target:89,keyframes:{y:[{value:593,tweenMethod:"linearNone",tween:!0,target:89,key:"y",index:0},{value:885,tweenMethod:"linearNone",tween:!0,target:89,key:"y",index:20}],x:[{value:331,tweenMethod:"linearNone",tween:!0,target:89,key:"x",index:0},{value:325,tweenMethod:"linearNone",tween:!0,target:89,key:"x",index:20}]}}],name:"ani3",id:3,frameRate:24,action:0},{nodes:[{target:72,keyframes:{y:[{value:-212,tweenMethod:"linearNone",tween:!0,target:72,key:"y",index:0},{value:-121.5,tweenMethod:"linearNone",tween:!0,target:72,key:"y",index:20}],x:[{value:193,tweenMethod:"linearNone",tween:!0,target:72,key:"x",index:0},{value:117,tweenMethod:"linearNone",tween:!0,target:72,key:"x",index:20}]}}],name:"ani4",id:4,frameRate:24,action:0},{nodes:[{target:95,keyframes:{x:[{value:0,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:95,key:"x",index:2}],skin:[{value:"UI/gameView/FNSS_fair01.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:0},{value:"UI/gameView/FNSS_fair02.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:2},{value:"UI/gameView/FNSS_fair03.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:4},{value:"UI/gameView/FNSS_fair04.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:6},{value:"UI/gameView/FNSS_fair05.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:8},{value:"UI/gameView/FNSS_fair06.png",tweenMethod:"linearNone",tween:!1,target:95,key:"skin",index:12}]}}],name:"ani5",id:5,frameRate:24,action:0},{nodes:[{target:119,keyframes:{skin:[{value:"UI/teachView/手点击1.png",tweenMethod:"linearNone",tween:!1,target:119,key:"skin",index:0},{value:"UI/teachView/手点击.png",tweenMethod:"linearNone",tween:!1,target:119,key:"skin",index:10}]}},{target:118,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:118,key:"alpha",index:0},{value:.3,tweenMethod:"linearNone",tween:!0,target:118,key:"alpha",index:10}]}}],name:"ani6",id:6,frameRate:24,action:0},{nodes:[{target:120,keyframes:{alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:120,key:"alpha",index:0},{value:.2,tweenMethod:"linearNone",tween:!0,target:120,key:"alpha",index:10}]}},{target:121,keyframes:{skin:[{value:"UI/teachView/手点击1.png",tweenMethod:"linearNone",tween:!1,target:121,key:"skin",index:0},{value:"UI/teachView/手点击.png",tweenMethod:"linearNone",tween:!1,target:121,key:"skin",index:10}]}}],name:"ani7",id:7,frameRate:24,action:0}],loadList:["UI/gameView/进度底.png","UI/gameView/进度底$bar.png","UI/gameView/进度等级底.png","UI/gameView/进度已过.png","UI/gameView/倒计时底.png","UI/gameView/倒计时进度.png","UI/gameView/剩余底.png","UI/gameView/球.png","UI/gameView/剩余.png","UI/gameView/炸弹底.png","UI/gameView/炸弹.png","UI/gameView/炸弹数量底.png","UI/gameView/点击装载底.png","UI/gameView/FNSS_fair01.png","UI/giftView/回流礼包小.png","UI/teachView/引导3.png","UI/teachView/每关都有子弹限制哦！让我们开始吧！.png","UI/teachView/引导1.png","UI/teachView/椭圆11.png","UI/teachView/手点击1.png","UI/teachView/瞄准橡皮君将他们全部弹走！.png","UI/teachView/引导2.png","UI/teachView/滑动屏幕来移动镜头！.png","UI/teachView/右箭头.png","UI/teachView/手2.png","UI/teachView/引导4.png","UI/teachView/手点击.png","UI/gameView/FNSS_fair02.png","UI/gameView/FNSS_fair03.png","UI/gameView/FNSS_fair04.png","UI/gameView/FNSS_fair05.png","UI/gameView/FNSS_fair06.png"],loadList3D:[]},e.GameViewUI=i,m("ui.GameViewUI",i);class s extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{top:0,skin:"UI/mainView/img_black.png",right:0,left:0,bottom:0,alpha:.5},compId:4},{type:"Box",props:{var:"rookieGift",top:0,right:0,left:0,bottom:0},compId:3,child:[{type:"Image",props:{x:78,width:564,skin:"UI/freeBombView/底板.png",sizeGrid:"44,46,47,40",height:500,centerY:-240,centerX:0},compId:33,child:[{type:"Image",props:{y:-65,x:201,visible:!0,skin:"UI/giftView/回流礼包.png"},compId:7},{type:"Image",props:{y:102,skin:"UI/giftView/新人豪礼第一弹！.png",centerX:0},compId:8},{type:"Image",props:{y:190,skin:"UI/giftView/黄金球.png",scaleY:.6,scaleX:.6,centerX:0},compId:6},{type:"Image",props:{y:337,skin:"UI/giftView/尺寸更大,威力更猛.png",centerX:1},compId:9},{type:"Button",props:{y:430,var:"confirmBtn",stateNum:1,skin:"UI/giftView/黄色按钮.png",centerX:1},compId:11,child:[{type:"Image",props:{y:28.5,x:108.5,var:"gift1Know",skin:"UI/giftView/知道了.png"},compId:12}]},{type:"Text",props:{y:382,x:2,width:561,var:"gift1Need",valign:"middle",text:"2:00:00后可领取",height:28,fontSize:28,font:"SimHei",color:"#047e99",align:"center",runtime:"Laya.Text"},compId:10}]}]},{type:"Box",props:{var:"rookieGift2",top:0,right:0,left:0,bottom:0},compId:16,child:[{type:"Image",props:{y:150,x:78,width:564,skin:"UI/freeBombView/底板.png",sizeGrid:"44,46,47,40",height:500,centerY:-240,centerX:0},compId:40,child:[{type:"Image",props:{y:103,skin:"UI/giftView/新人豪礼第二弹！.png",centerX:0},compId:19},{type:"Image",props:{y:-67,x:202.5,skin:"UI/giftView/次登礼包.png"},compId:27},{type:"Image",props:{y:181,x:80,skin:"UI/giftView/黄金弹弓.png",scaleY:.8,scaleX:.8},compId:20,child:[{type:"Text",props:{y:210,x:-41.5,text:"Golden Slingshot",fontSize:30,font:"SimHei",color:"#047E99",runtime:"Laya.Text"},compId:29}]},{type:"Image",props:{y:161,x:324,skin:"UI/giftView/炸弹.png",scaleY:.8,scaleX:.8},compId:28,child:[{type:"Text",props:{y:207,x:67.328125,text:"x3",fontSize:30,font:"SimHei",color:"#FF0D0D",bold:!0,runtime:"Laya.Text"},compId:30},{type:"Text",props:{y:237,x:7.9140625,text:"Daily Gift",fontSize:30,font:"SimHei",color:"#047E99",runtime:"Laya.Text"},compId:31}]},{type:"Text",props:{y:397,x:3,width:558,var:"gift2Need",valign:"middle",text:"24:00:00后可领取",height:28,fontSize:28,font:"SimHei",color:"#047e99",align:"center",runtime:"Laya.Text"},compId:22},{type:"Button",props:{y:433.5,var:"confirmBtn2",stateNum:1,skin:"UI/giftView/黄色按钮.png",centerX:0},compId:23,child:[{type:"Image",props:{y:28,x:108.5,var:"gift2Know",skin:"UI/giftView/知道了.png"},compId:24}]}]}]}],loadList:["UI/mainView/img_black.png","UI/freeBombView/底板.png","UI/giftView/回流礼包.png","UI/giftView/新人豪礼第一弹！.png","UI/giftView/黄金球.png","UI/giftView/尺寸更大,威力更猛.png","UI/giftView/黄色按钮.png","UI/giftView/知道了.png","UI/giftView/新人豪礼第二弹！.png","UI/giftView/次登礼包.png","UI/giftView/黄金弹弓.png","UI/giftView/炸弹.png"],loadList3D:[]},e.GiftViewUI=s,m("ui.GiftViewUI",s);class a extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{var:"bg",top:0,skin:"loadingView/背景.jpg",right:0,left:0,bottom:0},compId:6,child:[{type:"Image",props:{y:123,x:90,skin:"loadingView/LOGO.png",centerY:-437,centerX:3},compId:10}]},{type:"ProgressBar",props:{var:"progress",skin:"loadingView/进度底.png",sizeGrid:"0,5,0,2",centerY:343,centerX:0},compId:3,child:[{type:"Text",props:{y:54,x:606,var:"percentText",text:"50%",fontSize:26,font:"SimHei",color:"#047E99",bold:!0,runtime:"Laya.Text"},compId:5}]}],loadList:["loadingView/背景.jpg","loadingView/LOGO.png","loadingView/进度底.png"],loadList3D:[]},e.LoadingViewUI=a,m("ui.LoadingViewUI",a);class n extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{top:0,skin:"UI/mainView/img_black.png",right:0,left:0,bottom:0,alpha:.5},compId:3},{type:"Image",props:{width:659,skin:"UI/reviveView/底板.png",sizeGrid:"39,64,51,56",height:322,centerY:-330,centerX:0},compId:4,child:[{type:"Label",props:{y:128,x:147,width:385,var:"reviveDesc",valign:"middle",text:"额外3球？",height:90,fontSize:48,font:"SimHei",color:"#047E99",align:"center"},compId:11},{type:"Image",props:{y:-55,x:271,width:124,skin:"UI/gameView/球.png",height:123,centerX:4},compId:5},{type:"Button",props:{y:338,var:"moreBulletBtn",stateNum:1,skin:"UI/reviveView/按钮133.png",centerX:0},compId:7,child:[{type:"Text",props:{y:145,x:117.5,width:72,var:"recntDownNum",valign:"middle",text:"5s",height:36,fontSize:36,font:"SimHei",color:"#cacaca",align:"center",runtime:"Laya.Text"},compId:10},{type:"Image",props:{skin:"UI/reviveView/立即获得.png",centerY:0,centerX:0},compId:8}]},{type:"Text",props:{y:481,x:241,width:177,var:"restartBtn",valign:"middle",text:"Again",height:36,fontSize:36,font:"SimHei",color:"#cacaca",bold:!0,align:"center",runtime:"Laya.Text"},compId:12}]}],loadList:["UI/mainView/img_black.png","UI/reviveView/底板.png","UI/gameView/球.png","UI/reviveView/按钮133.png","UI/reviveView/立即获得.png"],loadList3D:[]},e.LoseViewUI=n,m("ui.LoseViewUI",n);class o extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{var:"logo",skin:"loadingView/LOGO.png",centerY:-300,centerX:0},compId:3},{type:"Button",props:{var:"musicBtn",top:37,stateNum:1,skin:"UI/mainView/音效开.png",left:31},compId:4,child:[{type:"Image",props:{y:11,x:17,var:"musicOff",skin:"UI/mainView/音效关闭.png"},compId:6}]},{type:"Button",props:{var:"startBtn",stateNum:1,skin:"UI/mainView/按钮.png",centerY:-40,centerX:0},compId:7,child:[{type:"Image",props:{y:45,x:53,skin:"UI/mainView/等级.png"},compId:8},{type:"Image",props:{y:55,x:143,skin:"UI/mainView/开始游戏.png"},compId:9},{type:"Text",props:{y:77,x:16,width:136,var:"lvlNum",valign:"middle",text:"41",height:55,fontSize:55,font:"SimHei",color:"#009590",align:"center",runtime:"Laya.Text"},compId:10}]},{type:"Box",props:{width:240,var:"InstreamBox",top:40,left:480,height:135},compId:31}],loadList:["loadingView/LOGO.png","UI/mainView/音效开.png","UI/mainView/音效关闭.png","UI/mainView/按钮.png","UI/mainView/等级.png","UI/mainView/开始游戏.png"],loadList3D:[]},e.MainViewUI=o,m("ui.MainViewUI",o);class r extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{top:0,skin:"UI/mainView/img_black.png",right:0,left:0,bottom:0,alpha:.5},compId:3},{type:"Image",props:{skin:"UI/victoryView/恭喜通关标签.png",centerY:-400,centerX:0},compId:5,child:[{type:"Image",props:{y:16,x:163,skin:"UI/victoryView/恭喜通关.png",centerX:0},compId:6},{type:"Image",props:{top:-56,skin:"UI/victoryView/等级.png",centerX:-25},compId:7,child:[{type:"Text",props:{y:0,x:128,width:100,var:"lvlNum",valign:"middle",text:"41",height:38,fontSize:38,font:"Microsoft YaHei",color:"#FFFC19",bold:!0,align:"left",runtime:"Laya.Text"},compId:8}]}]},{type:"Button",props:{var:"nextBtn",stateNum:1,skin:"UI/mainView/按钮.png",centerY:-40,centerX:0},compId:9,child:[{type:"Image",props:{y:37,x:32,skin:"UI/mainView/等级.png"},compId:10,child:[{type:"Text",props:{y:28,x:0,width:87,var:"nextLvlNum",valign:"middle",text:"42",pivotY:0,pivotX:0,height:55,fontSize:55,font:"SimHei",color:"#009590",align:"center",runtime:"Laya.Text"},compId:11}]},{type:"Image",props:{y:51,x:168,skin:"UI/victoryView/下一关.png"},compId:12}]}],loadList:["UI/mainView/img_black.png","UI/victoryView/恭喜通关标签.png","UI/victoryView/恭喜通关.png","UI/victoryView/等级.png","UI/mainView/按钮.png","UI/mainView/等级.png","UI/victoryView/下一关.png"],loadList3D:[]},e.WinViewUI=r,m("ui.WinViewUI",r)}(r||(r={})),function(e){!function(e){class t extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:129,height:127},compId:2,child:[{type:"Image",props:{width:122,var:"adSkin",height:121,centerY:0,centerX:0},compId:5,child:[{type:"Image",props:{y:0,x:0,skin:"UI/mainView/游戏框蒙版.png",renderType:"mask"},compId:4}]},{type:"Image",props:{y:1,x:0,skin:"UI/mainView/猜你喜欢游戏框.png"},compId:3}],loadList:["UI/mainView/游戏框蒙版.png","UI/mainView/猜你喜欢游戏框.png"],loadList3D:[]},e.FlowAdItemUI=t,m("ui.items.FlowAdItemUI",t);class i extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:146,height:183},compId:2,child:[{type:"Image",props:{y:0,x:0,width:146,var:"adSkin",height:183},compId:3,child:[{type:"Image",props:{y:147,x:1,skin:"UI/moreGameView/字底板.png",centerX:0,bottom:0},compId:5,child:[{type:"Text",props:{width:146,var:"adName",valign:"middle",text:"悬崖赛车2",overflow:"hidden",height:36,fontSize:26,font:"SimHei",color:"#FFFFFF",align:"center",runtime:"Laya.Text"},compId:6}]},{type:"Image",props:{y:0,x:0,skin:"UI/moreGameView/蒙版.png",renderType:"mask"},compId:7}]},{type:"Image",props:{y:0,x:0,skin:"UI/moreGameView/框.png"},compId:4}],loadList:["UI/moreGameView/字底板.png","UI/moreGameView/蒙版.png","UI/moreGameView/框.png"],loadList3D:[]},e.FullScreenAdItemUI=i,m("ui.items.FullScreenAdItemUI",i);class s extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{y:72,x:61,width:122,height:145,anchorY:.5,anchorX:.5},compId:2,child:[{type:"Image",props:{y:4,x:5,width:112,var:"adSkin",height:102},compId:4},{type:"Image",props:{y:0,x:0,skin:"UI/mainView/导流框啊框.png"},compId:3},{type:"Text",props:{y:111,x:2,width:119,var:"adName",valign:"middle",text:"乐动球球",overflow:"hidden",height:29,fontSize:18,font:"SimHei",color:"#000000",align:"center",runtime:"Laya.Text"},compId:5},{type:"Image",props:{var:"hot",top:0,skin:"UI/victoryView/红点.png",right:0},compId:6}],loadList:["UI/mainView/导流框啊框.png","UI/victoryView/红点.png"],loadList3D:[]},e.JumperAdItemUI=s,m("ui.items.JumperAdItemUI",s);class a extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:176,height:217},compId:2,child:[{type:"Image",props:{y:0,x:0,width:176,var:"adSkin",height:163},compId:3},{type:"Image",props:{y:0,x:0,width:176,var:"bottomSkin",skin:"UI/moreGameView/橙条.png",sizeGrid:"18,80,13,38",bottom:0},compId:4,child:[{type:"Text",props:{y:8,x:0,width:175,var:"adName",valign:"middle",text:"飘移乱斗",overflow:"hidden",fontSize:18,font:"SimHei",color:"#FFFFFF",align:"center",runtime:"Laya.Text"},compId:5},{type:"Text",props:{y:28,x:0,width:175,var:"fakeNum",valign:"middle",text:"31万人在玩",fontSize:18,font:"SimHei",color:"#FFFFFF",align:"center",runtime:"Laya.Text"},compId:6}]}],loadList:["UI/moreGameView/橙条.png"],loadList3D:[]},e.MoreAdItemUI=a,m("ui.items.MoreAdItemUI",a);class n extends d{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:544,height:129},compId:2,child:[{type:"Image",props:{y:0,x:0,width:544,skin:"UI/moreGameView/底板条.png",sizeGrid:"13,18,16,23",height:129},compId:3,child:[{type:"Image",props:{y:15,x:24,width:93,var:"adSkin",height:93},compId:4,child:[{type:"Image",props:{skin:"UI/moreGameView/头像蒙版.png",renderType:"mask"},compId:5}]},{type:"Text",props:{y:18,x:139,width:227,var:"adName",valign:"middle",text:"眼力达人2019",overflow:"hidden",height:27,fontSize:22,font:"SimHei",color:"#000000",align:"left",runtime:"Laya.Text"},compId:6},{type:"Image",props:{y:50,x:140,skin:"UI/moreGameView/试玩一分钟，返回即可领取.png"},compId:7},{type:"Button",props:{y:33,x:390,var:"jumpBtn",stateNum:1,skin:"UI/moreGameView/试玩按钮.png"},compId:8,child:[{type:"Image",props:{y:14,x:27,skin:"UI/moreGameView/试玩.png"},compId:9}]}]}],loadList:["UI/moreGameView/底板条.png","UI/moreGameView/头像蒙版.png","UI/moreGameView/试玩一分钟，返回即可领取.png","UI/moreGameView/试玩按钮.png","UI/moreGameView/试玩.png"],loadList3D:[]},e.TaskAdItemUI=n,m("ui.items.TaskAdItemUI",n)}(e.items||(e.items={}))}(r||(r={})),function(e){e[e.Shoot=0]="Shoot",e[e.SlideHorizon=1]="SlideHorizon",e[e.SlideVerticle=2]="SlideVerticle",e[e.BulletNum=3]="BulletNum",e[e.Finish=4]="Finish"}(l||(l={})),function(e){e[e.normal=0]="normal",e[e.gold=1]="gold",e[e.bomb=2]="bomb"}(h||(h={})),function(e){e[e.Wood=0]="Wood",e[e.Gold=1]="Gold"}(c||(c={}));class g{constructor(){this.level=1,this.subLevel=1,this.gift1Time=0,this.gift1Need=0,this.gift1Sub=!1,this.gift1Redeem=!1,this.gift2Show=!1,this.gift2Time=0,this.gift2Need=0,this.gift2Sub=!1,this.gift2Redeem=!1,this.isCollect=!1,this.preCollect=!1,this.bomb=1,this.bombCooldown=0,this.isBombCooldown=!1,this.teachStep=l.Shoot,this.bullet=h.normal,this.preBullet=h.normal,this.slingshot=c.Wood,this.taskDone=[],this.lastDay=0,this.extraShare=0}static get Ins(){return null==g._ins&&(g._ins=new g),g._ins}initData(){for(let e in g.SaveKey)this[g.SaveKey[e]]=this.getDataFromLocal(g.SaveKey[e],this[g.SaveKey[e]]);for(let e in g.SaveKey)this.saveDataToLocal(g.SaveKey[e],this[g.SaveKey[e]]);this.resetDailyInfo(Date.parse((new Date).toString())/1e3)}getDataFromLocal(e,t){try{var i=Laya.LocalStorage.getItem(e);if("null"!=i&&"undefined"!=i||(i=void 0),!n.Ins.isNullOrEmpty(i))return JSON.parse(i)}catch(t){console.error("getDataFromLocal Exception: "+e)}return t}saveDataToLocal(e,t){Laya.LocalStorage.setItem(e,JSON.stringify(t))}updateBomb(e=-1){this.bomb+=e,this.saveDataToLocal(g.SaveKey.bomb,this.bomb)}addLevel(e=1){this.level+=e,this.saveDataToLocal(g.SaveKey.level,this.level)}addSubLevel(e=1){this.subLevel+=e,this.subLevel>4&&(this.subLevel=1,this.level++),this.saveDataToLocal(g.SaveKey.level,this.level)}refreshSubLevel(){this.subLevel=1,this.saveDataToLocal(g.SaveKey.subLevel,this.subLevel)}setTestLevel(e){this.level=e,this.saveDataToLocal(g.SaveKey.level,this.level)}refreshTeachStep(e){this.teachStep=e,this.saveDataToLocal(g.SaveKey.teachStep,this.teachStep)}changeSlingshot(e){this.slingshot=e,this.saveDataToLocal(g.SaveKey.slingshot,this.slingshot)}changeBullet(e){switch(e){case h.normal:this.bullet=h.normal,this.preBullet=this.bullet;break;case h.gold:this.bullet=h.gold,this.preBullet=this.bullet;break;case h.bomb:this.bullet!==h.bomb&&(this.preBullet=this.bullet),this.bullet=h.bomb}this.saveDataToLocal(g.SaveKey.bullet,this.bullet),this.saveDataToLocal(g.SaveKey.preBullet,this.preBullet)}setBombCoolDown(e){this.isBombCooldown=e,e&&(this.bombCooldown=Math.floor((new Date).getTime()/1e3)),this.saveDataToLocal(g.SaveKey.bombCooldown,this.bombCooldown),this.saveDataToLocal(g.SaveKey.isBombCooldown,this.isBombCooldown)}addBomb(e){this.bomb+=e,this.bomb>1&&(this.bomb=1),this.saveDataToLocal(g.SaveKey.bomb,this.bomb)}setGift1Time(){this.gift1Time=Math.floor((new Date).getTime()/1e3),this.gift1Need=7200,this.saveDataToLocal(g.SaveKey.gift1Time,this.gift1Time),this.saveDataToLocal(g.SaveKey.gift1Need,this.gift1Need)}setGift2Time(){this.gift2Time=Math.floor((new Date).getTime()/1e3),this.gift2Need=Math.max(86400,2*(24-(new Date).getHours())*3600),this.saveDataToLocal(g.SaveKey.gift2Time,this.gift2Time),this.saveDataToLocal(g.SaveKey.gift2Need,this.gift2Need)}setGift1Redeem(){this.gift1Redeem=!0,this.saveDataToLocal(g.SaveKey.gift1Redeem,this.gift1Redeem)}setGift2Redeem(){this.gift2Redeem=!0,this.saveDataToLocal(g.SaveKey.gift2Redeem,this.gift2Redeem)}setGift1Sub(){this.gift1Sub=!0,this.saveDataToLocal(g.SaveKey.gift1Sub,this.gift1Sub)}setGift2Sub(){this.gift2Sub=!0,this.saveDataToLocal(g.SaveKey.gift2Sub,this.gift2Sub)}setGift1Need(){this.gift1Need=this.gift1Need/2,this.saveDataToLocal(g.SaveKey.gift1Need,this.gift1Need)}setGift2Need(){this.gift2Need=this.gift2Need/2,this.saveDataToLocal(g.SaveKey.gift2Need,this.gift2Need)}setGift2Show(){this.gift2Show=!0,this.saveDataToLocal(g.SaveKey.gift2Show,this.gift2Show)}setPreCollect(){this.preCollect=!0,this.saveDataToLocal(g.SaveKey.preCollect,this.preCollect)}setCollect(){this.isCollect=!0,this.saveDataToLocal(g.SaveKey.isCollect,this.isCollect)}checkTaskRemained(e){for(let t=0;t<e.length;t++)if(-1==this.taskDone.indexOf(e[t].fromappId))return!0;return!1}checkTaskFinished(e=""){return-1!=this.taskDone.indexOf(e)}saveFinishedTask(e=""){-1==this.taskDone.indexOf(e)?this.taskDone.push(e):console.log("already finished"),this.saveDataToLocal(g.SaveKey.taskDone,this.taskDone)}resetDailyInfo(e){(e=n.Ins.timestampToDate(e))!=this.lastDay&&(this.lastDay=e,this.extraShare=0,this.saveDataToLocal(g.SaveKey.extraShare,this.extraShare),this.saveDataToLocal(g.SaveKey.lastDay,this.lastDay))}addExtraShare(){this.extraShare++,this.saveDataToLocal(g.SaveKey.extraShare,this.extraShare)}}g.SaveKey={level:"level",subLevel:"subLevel",gift1Time:"gift1Time",gift1Need:"gift1Need",gift1Redeem:"gift1Redeem",gift2Time:"gift2Time",gift2Need:"gift2Need",gift1Sub:"gift1Sub",gift2Sub:"gift2Sub",gift2Show:"gift2Show",gift2Redeem:"gift2Redeem",isCollect:"isCollect",preCollect:"preCollect",bomb:"bomb",teachStep:"teachStep",bombCooldown:"bombCooldown",isBombCooldown:"isBombCooldown",bullet:"bullet",preBullet:"preBullet",slingshot:"slingshot",taskDone:"taskDone",lastDay:"lastDay",extraShare:"extraShare"};class p{constructor(){this.musicSwitch=!0}static get Ins(){return null==p._ins&&(p._ins=new p),p._ins}init(){Laya.SoundManager.musicVolume=.2,Laya.SoundManager.soundVolume=1,this.musicSwitch=g.Ins.getDataFromLocal("sound",!0),g.Ins.saveDataToLocal("sound",this.musicSwitch),Laya.loader.load("sound/bgm_2.mp3",Laya.Handler.create(null,()=>{this.PlayMusic()}),null,Laya.Loader.SOUND)}SwitchSound(){this.musicSwitch=!this.musicSwitch,!this.musicSwitch&&this.StopMusic(),this.musicSwitch&&this.PlayMusic(),g.Ins.saveDataToLocal("sound",this.musicSwitch)}PlayMusic(){this.musicSwitch&&Laya.SoundManager.playMusic("sound/bgm_2.mp3",0)}StopMusic(){Laya.SoundManager.stopMusic()}PlayAudio(e){Laya.SoundManager.playSound("sound/"+e+".wav",1)}}class y extends Laya.Script3D{constructor(){super()}onAwake(){this.box=this.owner,this.rig=this.box.getComponent(Laya.Rigidbody3D),this.oriPos=this.box.transform.position.clone(),this.box.transform.translate(new Laya.Vector3(0,5,0),!1),this.rig.mass=1,this.rig.linearDamping=.05,this.rig.angularDamping=.05,t.Ins.on(i.UPDATE_SHOOT,this.Shoot,this),t.Ins.on(i.ALL_SLEEP,this.Sleep,this),t.Ins.on(i.WIN_BOMB,this.BombOut,this),t.Ins.on(i.CLEAR_COLL,this.DestroyAni,this),t.Ins.on(i.TRUE_BOMB,this.BombWin,this),t.Ins.on(i.FINISH_ENTER,this.finishEnter,this),this.rig.isKinematic=!0,this.rig.detectCollisions=!1,Laya.timer.once(40*this.boxID,this,this.AwakeAni)}AwakeAni(){var e=this,t=this.box.transform.position.clone(),i=this.oriPos;Laya.Tween.to(t,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(null,function(){e.box.transform.position=t})},200,null,Laya.Handler.create(this,this.AwakeAniComplete))}AwakeAniComplete(){this.boxID==this.max&&t.Ins.dispatch(i.FINISH_ENTER)}finishEnter(){this.box.name.includes("Cylinder013")?(this.rig.isKinematic=!0,this.rig.detectCollisions=!0):(16==g.Ins.level&&2==g.Ins.subLevel?this.rig.isKinematic=!0:this.rig.isKinematic=!1,this.rig.detectCollisions=!0,this.box.name.includes("human")?(this.rig.mass=.5,this.rig.linearDamping=.3,this.rig.friction=.5):(this.rig.mass=.8,this.rig.linearDamping=.3,this.rig.angularDamping=.7,this.rig.friction=.5)),t.Ins.dispatch(i.GAMEVIEW_ENTER)}onDestroy(){t.Ins.off(i.UPDATE_SHOOT,this.Shoot,this),t.Ins.off(i.ALL_SLEEP,this.Sleep,this),t.Ins.off(i.WIN_BOMB,this.BombOut,this),t.Ins.off(i.CLEAR_COLL,this.DestroyAni,this),t.Ins.off(i.TRUE_BOMB,this.BombWin,this),t.Ins.off(i.FINISH_ENTER,this.finishEnter,this)}DestroyAni(){var e=this,t=this.box.transform.position.clone(),i=this.box.transform.position.clone();i.y+=2,this.rig.isKinematic=!0,Laya.Tween.to(t,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(null,function(){e.box.transform.position=t,e.box.transform.localRotationEulerY-=12})},500,null),Laya.timer.once(200,this,this.DestroyAniScale)}DestroyAniScale(){var e=this,t=this.box.transform.scale.clone(),i=new Laya.Vector3(0,0,0);Laya.Tween.to(t,{x:i.x,y:i.y,z:i.z,update:new Laya.Handler(null,function(){e.box.transform.scale=t})},300,null,Laya.Handler.create(this,this.DestroySelf))}DestroySelf(){this.box.destroy()}onUpdate(){if(this.box&&(Math.abs(this.rig.linearVelocity.x)<.3&&Math.abs(this.rig.linearVelocity.y)<.3&&Math.abs(this.rig.linearVelocity.z)<.3?this.isSleeping=!0:this.isSleeping=!1,this.box.transform&&this.box.transform.localPositionY<-20)){for(let e=0;e<L.Ins.boxArr.length;e++)if(L.Ins.boxArr[e].boxID==this.boxID){L.Ins.boxArr.splice(e,1);break}this.box.destroy()}}Shoot(){this.box.name.includes("Cylinder013")?this.rig.isKinematic=!0:this.rig.isKinematic=!1}Sleep(){this.box.transform&&this.box.transform.localPositionY<this.box.transform.localScaleY/2?this.rig.isKinematic=!1:this.rig.isKinematic=!0}BombOut(e="win"){if(this.box){let e=300;var t=new Laya.Vector3(1,1,1);let a=new Laya.Vector3(0,1,0);var i=e-Laya.Vector3.distance(a,this.box.transform.localPosition);Laya.Vector3.subtract(this.box.transform.localPosition,a,t),Math.abs(t.x)<.1&&Math.abs(t.z)<.1&&(Math.random()>.5?(t.z+=.5+.5*Math.random(),t.x+=.5+.5*Math.random()):(t.z-=.5+.5*Math.random(),t.x-=.5+.5*Math.random())),t.x*=i,t.y*=i,t.z*=i,this.rig.isKinematic=!1,this.rig.applyForce(t);var s=new Laya.Vector3(10,10,10);this.rig.applyTorque(s)}}BombWin(e,t){if(this.box.transform){let n=300;var i=new Laya.Vector3(1,1,1);let o=new Laya.Vector3(e.x-(5+10*t),e.y-(10+10*t),e.z-10*t);var s=n-Laya.Vector3.distance(o,this.box.transform.localPosition);Laya.Vector3.subtract(this.box.transform.localPosition,o,i),i.y=Math.abs(i.y),Math.abs(i.x)<.1&&Math.abs(i.z)<.1&&(Math.random()>.5?(i.z+=.5+.5*Math.random(),i.x+=.5+.5*Math.random()):(i.z-=.5+.5*Math.random(),i.x-=.5+.5*Math.random())),i.x*=s,i.y*=s,i.z*=s,Math.abs(i.x)<100&&Math.abs(i.y)<100&&Math.abs(i.z)<100&&(i.x<0?i.x-=100:i.x+=100,i.y<0?i.y-=100:i.y+=100,i.z<0?i.z-=100:i.z+=100),this.rig.isKinematic=!1,this.rig.clearForces(),this.rig.linearVelocity=new Laya.Vector3(0,0,0),this.rig.applyForce(i);var a=new Laya.Vector3(10,10,10);this.rig.applyTorque(a)}}}class I extends Laya.Script3D{constructor(){super(),this.isOnGround=!1,this.isStanding=!0,this.dead=!1}onAwake(){this.enemy=this.owner,this.animator=this.enemy.getComponent(Laya.Animator),this.rig=this.enemy.getComponent(Laya.Rigidbody3D),this.play("idle",!1),Laya.timer.loop(2e3,this,this.checkIsStanding)}onCollisionExit(e){}checkIsStanding(){!this.dead&&this.enemy.getComponent(y)&&this.enemy.getComponent(y).isSleeping&&this.isStanding&&this.enemy.transform.localPositionY<1.2&&(Math.abs(this.enemy.transform.localRotationEulerX%180)>80||Math.abs(this.enemy.transform.localRotationEulerZ%180)>80)&&(this.isStanding=!1),this.isStanding||Laya.Tween.to(this.enemy.transform,{localPositionY:1,localRotationEulerX:0,localRotationEulerZ:0},500,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{this.isStanding=!0}))}standDone(){console.log("stand down")}play(e,t=!1){this.animator&&this.animator.getControllerLayer(0).getAnimatorState(e)&&this.animator.getControllerLayer(0).getAnimatorState(e).clip&&(this.animator.speed=1,this.animator.getControllerLayer(0).getAnimatorState(e).clip.islooping=t,this.animator.play(e,0,0))}onLateUpdate(){this.dead||this.enemy.transform.localPositionY<0&&(this.dead=!0,Laya.timer.clearAll(this),t.Ins.dispatch(i.ENEMY_DEAD,[1]))}}class u extends Laya.Script3D{constructor(){super(),this.flagId=0}onAwake(){this.flag=this.owner,this.animator=this.flag.getComponent(Laya.Animator),t.Ins.on(i.WIN_FLAG,this.play,this),this.play("idle",!1)}onDestroy(){}winFinish(){t.Ins.off(i.WIN_FLAG,this.play,this),t.Ins.dispatch(i.CLEAR_COLL),1!==g.Ins.subLevel&&(p.Ins.PlayAudio("nextLevel"),L.Ins.camera2NextLevel())}play(e="idle",t,i=!1){"win"==e?this.animator&&t+1==this.flagId&&this.animator.getControllerLayer(0).getAnimatorState(e)&&this.animator.getControllerLayer(0).getAnimatorState(e).clip&&(this.animator.speed=1,this.animator.getControllerLayer(0).getAnimatorState(e).clip.islooping=i,this.animator.play(e),p.Ins.PlayAudio("flag_up")):this.animator&&this.animator.getControllerLayer(0).getAnimatorState(e)&&this.animator.getControllerLayer(0).getAnimatorState(e).clip&&(this.animator.speed=0,this.animator.getControllerLayer(0).getAnimatorState(e).clip.islooping=i,this.animator.play(e))}}class w extends Laya.Script3D{constructor(){super(),this.cloud=null}onAwake(){this.cloud=this.owner}onUpdate(){this.cloud.transform.localRotationEulerY+=.02*Math.random()}onDestroy(){}}class f extends Laya.Script3D{constructor(){super()}onAwake(){this.slingshot=this.owner,this.animator=this.slingshot.getComponent(Laya.Animator),this.play("idle",!1)}onEnable(){t.Ins.on(i.UPDATE_SHOOT,this.play,this)}onDisable(){t.Ins.off(i.UPDATE_SHOOT,this.play,this)}play(e="shoot",t=!1){this.animator&&this.animator.getControllerLayer(0).getAnimatorState(e)&&this.animator.getControllerLayer(0).getAnimatorState(e).clip&&(this.animator.speed=1,this.animator.getControllerLayer(0).getAnimatorState(e).clip.islooping=t,this.animator.play(e,0,0))}}class v extends Laya.Script3D{constructor(){super(),this.effectId=0}onAwake(){t.Ins.on(i.BOMB_EFFECT,this.play,this),this.effect=this.owner,this.effect2=this.owner.getChildAt(0),this.effect.particleSystem.stop(),this.effect2.particleSystem.stop()}onDestroy(){t.Ins.off(i.BOMB_EFFECT,this.play,this)}play(){this.effect.particleSystem.play(),this.effect2.particleSystem.play()}}const b=30;class L{constructor(){this.QSceneType=null,this.dicScenePath=null,this.loadedScene=null,this.gameScene=null,this.gameCamera=null,this.gameCube=null,this.gameArc=null,this.gameGround=null,this.bulletPrefab={},this.colliderPrefab={},this.enemyPrefab={},this.slingshotPrefab={},this.cloudPrefab={},this.levelPrefab={},this.flagPrefab={},this.skyPrefab={},this.fakeBullet=null,this.enemyArr=[],this.boxArr=[],this.gameEnterDancing=null,this.gameSlingshot=null,this.gameBullet=null,this.bombEffect=null,this.isTest=!1,this.stopCheckOnce=!1,this.QSceneType={Game:1},this.dicScenePath={1:"subpackage/LayaScene_shootZ/Conventional/shootZ.ls"}}static get Ins(){return null==L._ins&&(L._ins=new L),L._ins}loadScene(){for(var e in this.dicScenePath)Laya.loader.create(this.dicScenePath[e],Laya.Handler.create(this,this.doLoadSceneFinished,[Number(e)]))}loadGameSceneFinished(){this.gameScene=Laya.loader.getRes(this.dicScenePath[this.QSceneType.Game]),this.gameArc=this.gameScene.getChildByName("RotateObject"),this.gameCamera=this.gameArc.getChildAt(0).getChildByName("Main Camera"),this.gameSlingshot=this.gameArc.getChildAt(0).getChildByName("Slingshot"),this.bombEffect=this.gameArc.getChildAt(0).getChildByName("Stone"),this.bombEffect.addComponent(v);for(let e=0;e<2;e++)this.gameSlingshot.getChildAt(e).addComponent(f);this.gameBullet=this.gameArc.getChildAt(0).getChildByName("bullet"),this.gameSlingshot.active=!1,this.gameBullet.active=!1,this.gameGround=this.gameScene.getChildByName("level"),this.gameEnterDancing=this.gameScene.getChildByName("init"),this.gameEnterDancing.active=!1;let e=this;Laya.BaseMaterial.load("subpackage/LayaScene_shootZ/Conventional/Assets/skybox/Terrain/LowpolyStyle/SharedMaterialsandTextures/Materials/New Sky.lmat",Laya.Handler.create(null,function(t){0,e.skyPrefab.normal=t})),Laya.BaseMaterial.load("subpackage/LayaScene_shootZ/Conventional/Assets/skybox/Terrain/LowpolyStyle/SharedMaterialsandTextures/Materials/sky_rage.lmat",Laya.Handler.create(null,function(t){0,e.skyPrefab.rage=t})),this.changeSlingshot(g.Ins.slingshot);for(var s=this.gameScene.getChildByName("ColliderPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.meshRenderer.castShadow=!0,e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.colliderPrefab[e.name]=e}for(s=this.gameScene.getChildByName("BallPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.meshRenderer.castShadow=!0,e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.bulletPrefab[e.name]=e}for(s=this.gameScene.getChildByName("HumanPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.enemyPrefab[e.name]=e}for(s=this.gameScene.getChildByName("SlingshotPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.meshRenderer.castShadow=!0,e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.slingshotPrefab[e.name]=e}for(s=this.gameScene.getChildByName("CloudPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.cloudPrefab[e.name]=e}for(s=this.gameScene.getChildByName("levelPrefab"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.levelPrefab[e.name]=e}for(s=this.gameScene.getChildByName("flag_tool"),a=0;a<s.numChildren;a++){let e=s.getChildAt(a);e.transform.position=new Laya.Vector3(1e3,1e3,1e3),this.flagPrefab[e.name]=e}Laya.stage.addChildAt(this.gameScene,0),Laya.timer.loop(1e3,this,this.checkBoxSleep),t.Ins.on(i.UPDATE_SHOOT,this.shootEvent,this)}initLevel(){if(this.gameScene._children.forEach(e=>{"Sphere001"==e.name&&e.destroy()}),this.gameEnterDancing.active=!1,this.gameSlingshot.active=!0,this.gameBullet.active=!0,this.gameGround.removeChildren(),this.changeBullet(g.Ins.bullet),this.enemyArr=[],1==g.Ins.level||this.isTest){let e=Laya.Sprite3D.instantiate(this.levelPrefab.level1);e.transform.localPositionX=5,e.transform.localPositionY=10,e.transform.localPositionZ=0,this.gameArc.transform.localPositionX=5,this.gameArc.transform.localPositionY=11.6,this.gameArc.transform.localPositionZ=0,this.boxArr=new Array;let t=0;e.getChildByName("collider")._children.forEach((i,s)=>{let a=i.addComponent(y);this.boxArr.push(a),a.boxID=s+1,i.name.includes("human")&&(i.addComponent(I),t++),a.max=e.getChildByName("collider")._children.length}),this.enemyArr.push(t),this.addCloud(e.getChildByName("Cloud")),this.addFlag(e.getChildByName("victoryNode"),1),this.gameGround.addChild(e),this.gameArc.transform.localRotationEulerX=30,this.gameArc.transform.localRotationEulerY=0}else if(2==g.Ins.level){for(let e=0;e<3;e++){let t=Laya.Sprite3D.instantiate(this.levelPrefab["level"+(g.Ins.level+e)]);t.transform.localPositionX=5+10*(e+1),t.transform.localPositionY=10+10*(e+1),t.transform.localPositionZ=0+10*(e+1);let i=0;t.getChildByName("collider")._children.forEach((e,t)=>{e.name.includes("human")&&(e.addComponent(I),i++)}),this.enemyArr.push(i),e>0?(t.getChildByName("collider").active=!1,t.getChildByName("bottom")._children.forEach((e,t)=>{let i=e.getComponent(Laya.PhysicsCollider);i&&(i.enabled=!1)})):(this.boxArr=new Array,t.getChildByName("collider")._children.forEach((e,i)=>{let s=e.addComponent(y);this.boxArr.push(s),s.boxID=i+1,s.max=t.getChildByName("collider")._children.length}),this.gameArc.transform.localPositionX=5+10*(e+1),this.gameArc.transform.localPositionY=11.6+10*(e+1),this.gameArc.transform.localPositionZ=0+10*(e+1)),this.addCloud(t.getChildByName("Cloud")),this.addFlag(t.getChildByName("victoryNode"),g.Ins.level+e),this.gameGround.addChild(t)}this.gameArc.transform.localRotationEulerX=30,this.gameArc.transform.localRotationEulerY=120}else{for(let e=0;e<4;e++){let t=0;t=g.Ins.level>b?4*((g.Ins.level-3)%28+1)+e+1:4*(g.Ins.level-2)+e+1;let i=Laya.Sprite3D.instantiate(this.levelPrefab["level"+t]);i.transform.localPositionX=5+10*(t-1),i.transform.localPositionY=10+10*(t-1),i.transform.localPositionZ=0+10*(t-1);let s=0;i.getChildByName("collider")._children.forEach((e,t)=>{if(e.name.includes("human")&&(e.addComponent(I),s++),e.name.includes("bucket")){let t=e.getComponent(Laya.Rigidbody3D),i=new Laya.CylinderColliderShape(.25,1.25,2);t.colliderShape=i}else if(e.name.includes("log")){let t=e.getComponent(Laya.Rigidbody3D),i=new Laya.CylinderColliderShape(.25,1.1,2);t.colliderShape=i}else if(e.name.includes("Cylinder012")){let t=e.getComponent(Laya.Rigidbody3D),i=new Laya.CylinderColliderShape(.13,.26,2);i.localOffset=new Laya.Vector3(0,0,.16),t.colliderShape=i}else if(e.name.includes("Cylinder013")){let t=e.getComponent(Laya.Rigidbody3D),i=new Laya.CylinderColliderShape(.25,1.1,2);t.colliderShape=i}}),this.enemyArr.push(s),e>0?(i.getChildByName("collider").active=!1,i.getChildByName("bottom")._children.forEach((e,t)=>{let i=e.getComponent(Laya.PhysicsCollider);i&&(i.enabled=!1)})):(this.boxArr=new Array,i.getChildByName("collider")._children.forEach((e,t)=>{let s=e.addComponent(y);this.boxArr.push(s),s.boxID=t+1,s.max=i.getChildByName("collider")._children.length}),this.gameArc.transform.localPositionX=5+10*(t-1),this.gameArc.transform.localPositionY=11.6+10*(t-1),this.gameArc.transform.localPositionZ=0+10*(t-1)),this.addFlag(i.getChildByName("victoryNode"),t),this.addCloud(i.getChildByName("Cloud")),this.gameGround.addChild(i)}this.gameArc.transform.localRotationEulerX=30,this.gameArc.transform.localRotationEulerY=0}}addCloud(e){let t=n.Ins.getRandomInt(15,22);for(let i=0;i<t;i++){let t=n.Ins.getRandomInt(1,3),i=Laya.Sprite3D.instantiate(this.cloudPrefab["GeoSphere00"+t]);i.transform.localPositionX=Math.random()>.5?n.Ins.getRandomNum(-13,-8):n.Ins.getRandomNum(8,13),i.transform.localPositionY=n.Ins.getRandomNum(-5,5),i.transform.localPositionZ=Math.random()>.5?n.Ins.getRandomNum(-12,-2):n.Ins.getRandomNum(2,12),i.transform.localRotationEulerX=n.Ins.getRandomInt(-180,180),i.transform.localRotationEulerY=n.Ins.getRandomInt(-180,180),i.transform.localRotationEulerZ=n.Ins.getRandomInt(-180,180),e.addChild(i)}e.addComponent(w)}addFlag(e,t){let i=Laya.Sprite3D.instantiate(this.flagPrefab.flag);i.addComponent(u).flagId=t,i.transform.localPosition=new Laya.Vector3(0,0,0),i.transform.localRotationEuler=new Laya.Vector3(0,180,0),e.addChild(i)}doLoadSceneFinished(e){switch(this.loadedScene|=e,e){case this.QSceneType.Game:this.loadGameSceneFinished()}this.isSceneLoaded(this.QSceneType.Game)&&t.Ins.dispatch(i.RES_LOAD_FINISHED,s.QResType.Scene3D)}isSceneLoaded(e){return 0!=(this.loadedScene&e)}checkBoxSleep(){if(this.stopCheckOnce)return void(this.stopCheckOnce=!1);let e=!0;for(var s=0;s<this.boxArr.length;s++)this.boxArr[s].isSleeping||(e=!1);e?(console.log("all sleep"),t.Ins.dispatch(i.ALL_SLEEP)):console.log("no sleep")}shootEvent(){this.stopCheckOnce=!0}WinBomb(e="win"){let s=0;2==g.Ins.level?s=g.Ins.level+g.Ins.subLevel-2:g.Ins.level>2&&(s=g.Ins.level>b?4*((g.Ins.level-3)%28+1)+g.Ins.subLevel-1:4*(g.Ins.level-2)+g.Ins.subLevel-1),t.Ins.dispatch(i.WIN_BOMB,[e]),t.Ins.dispatch(i.WIN_FLAG,["win",s])}useBomb(e){let s=0;2==g.Ins.level?s=g.Ins.level+g.Ins.subLevel-2:g.Ins.level>2&&(s=g.Ins.level>b?4*((g.Ins.level-3)%28+1)+g.Ins.subLevel-1:4*(g.Ins.level-2)+g.Ins.subLevel-1),t.Ins.dispatch(i.BOMB_EFFECT,[s]),t.Ins.dispatch(i.TRUE_BOMB,[e,s])}ClearBox(){t.Ins.dispatch(i.CLEAR_COLL)}camera2NextLevel(){let e=0;e=2==g.Ins.level?g.Ins.level+g.Ins.subLevel-1:g.Ins.level>b?Math.round(4*((g.Ins.level-3)%28+1)+g.Ins.subLevel):4*(g.Ins.level-2)+g.Ins.subLevel,this.gameGround.getChildByName("level"+(e-1)).getChildByName("bottom")._children.forEach((e,t)=>{let i=e.getComponent(Laya.PhysicsCollider);i&&(i.enabled=!1)}),Laya.Tween.to(this.gameArc.transform,{localPositionX:5+10*(e-1),localPositionY:11.6+10*(e-1),localPositionZ:0+10*(e-1),localRotationEulerX:3==e?-50:30,localRotationEulerY:0,localRotationEulerZ:0},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{let s=this.gameGround.getChildByName("level"+e);this.boxArr=new Array,s.getChildByName("collider")._children.forEach((e,t)=>{let i=e.addComponent(y);this.boxArr.push(i),i.boxID=t+1,i.max=s.getChildByName("collider")._children.length}),s.getChildByName("bottom")._children.forEach((e,t)=>{let i=e.getComponent(Laya.PhysicsCollider);i&&(i.enabled=!0)}),4!=e&&(s.getChildByName("collider").active=!0),t.Ins.dispatch(i.UPDATE_SUBLEVEL),t.Ins.dispatch(i.UPDATE_BULLET)}))}changeBullet(e){switch(g.Ins.changeBullet(e),g.Ins.bullet){case h.normal:this.gameScene.skyRenderer.material=this.skyPrefab.normal,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!0,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!1,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0);break;case h.gold:this.gameScene.skyRenderer.material=this.skyPrefab.normal,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!0,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2);break;case h.bomb:this.gameScene.skyRenderer.material=this.skyPrefab.rage,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!0,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!1,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1)}t.Ins.dispatch(i.UPDATE_BOMB)}changeSlingshot(e){switch(g.Ins.changeSlingshot(e),g.Ins.bullet){case h.normal:this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!0,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!1,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0);break;case h.gold:this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!0,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2);break;case h.bomb:this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(0).active=!1,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1).active=!0,this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(2).active=!1,this.fakeBullet=this.gameArc.getChildAt(0).getChildByName("bullet").getChildAt(1)}switch(g.Ins.slingshot){case c.Wood:this.gameArc.getChildAt(0).getChildByName("Slingshot").getChildAt(0).active=!0,this.gameArc.getChildAt(0).getChildByName("Slingshot").getChildAt(1).active=!1;break;case c.Gold:this.gameArc.getChildAt(0).getChildByName("Slingshot").getChildAt(0).active=!1,this.gameArc.getChildAt(0).getChildByName("Slingshot").getChildAt(1).active=!0}}showEnterDancing(){this.gameArc.transform.localPositionX=0,this.gameArc.transform.localPositionY=1.6,this.gameArc.transform.localPositionZ=0,this.gameArc.transform.localRotationEulerX=30,this.gameArc.transform.localRotationEulerY=0,this.gameEnterDancing.active=!0,this.gameSlingshot.active=!1,this.gameBullet.active=!1}cameraShake(){let e=this.gameCamera.transform.localRotationEulerY,t=this.gameCamera.transform.localRotationEulerX,i=this;Laya.Tween.to(i.gameCamera.transform,{localRotationEulerX:t+.21,localRotationEulerY:e+.21},100,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{Laya.Tween.to(i.gameCamera.transform,{localRotationEulerX:t,localRotationEulerY:e},100,Laya.Ease.linearNone)}))}}class S{constructor(){this.dicConfig=null,this.loadCfgType=null,this.MAX_CONFIG_NUM=null,this.isAllCfgLoadFinished=null,this.loadCount=null,this.configPathPrefix=null,this.dicConfig={},this.loadCfgType=0,this.MAX_CONFIG_NUM=5,this.loadCount=0,this.isAllCfgLoadFinished=!1,window.wx?this.configPathPrefix="https://jy-wxgame.oss-cn-hangzhou.aliyuncs.com/shootZ/config/":this.configPathPrefix="config/"}static get Ins(){return null==S._ins&&(S._ins=new S),S._ins}loadAllCfg(e=!0){for(let e in s.QCfgType)Laya.loader.load(this.getCfgPathByType(s.QCfgType[e]),Laya.Handler.create(this,this.getLocalConfigDone,[s.QCfgType[e]]),null,Laya.Loader.BUFFER)}isCfgLoadFinished(e){return 0!=(this.loadCfgType&e)}getLocalConfigDone(e){var t=Laya.loader.getRes(this.getCfgPathByType(e)),i=new Laya.Byte(t),s=i.readUTFBytes(i.length);this.dicConfig[e]=JSON.parse(s),this.doCfgLoadFinish(e)}doCfgLoadFinish(e){this.loadCfgType|=e;var a,n=!0;for(a in s.QCfgType)if(!this.isCfgLoadFinished(s.QCfgType[a])){n=!1;break}n&&!this.isAllCfgLoadFinished&&(this.isAllCfgLoadFinished=!0,this.loadCfgType=0,t.Ins.dispatch(i.RES_LOAD_FINISHED,s.QResType.Config))}getCfgPathByType(e){return this.configPathPrefix+s.QCfgName[e]+".json"}}var C;!function(e){e[e.BANNER_SIZE_320_50=0]="BANNER_SIZE_320_50",e[e.BANNER_SIZE_320_100=1]="BANNER_SIZE_320_100",e[e.BANNER_SIZE_300_250=2]="BANNER_SIZE_300_250",e[e.BANNER_SIZE_360_57=3]="BANNER_SIZE_360_57",e[e.BANNER_SIZE_360_144=4]="BANNER_SIZE_360_144",e[e.BANNER_SIZE_SMART=5]="BANNER_SIZE_SMART"}(C||(C={}));const x=new class{constructor(){this.openAd=!0}showNativeAd(e){Laya.Browser.onAndroid&&window.loadingView.bridge.call("showNative")}hideNativeAd(){Laya.Browser.onAndroid&&window.loadingView.bridge.call("hideNative")}showInstream(e,t,i){Laya.Browser.onAndroid&&window.loadingView.bridge.call("showInstream",e,t,i)}hideInstream(){Laya.Browser.onAndroid&&window.loadingView.bridge.call("hideInstream")}showInterstitialAd(){Laya.Browser.onAndroid&&window.loadingView.bridge.call("showInterstitialAd")}pause(){Laya.stage.renderingEnabled=!1,Laya.updateTimer.pause(),Laya.physicsTimer.pause()}resume(){Laya.stage.renderingEnabled=!0,Laya.updateTimer.resume(),Laya.physicsTimer.resume()}showBannerAd(e){Laya.Browser.onAndroid&&window.loadingView.bridge.call("showBanner",e)}hideBannerAd(){Laya.Browser.onAndroid&&window.loadingView.bridge.call("hideBanner")}loadVideoAd(){return Math.random()<.5?Promise.resolve():Promise.reject(null)}playVideoAd(){return Math.random()<.5?Promise.resolve():Promise.reject(null)}playVideo(e,t,i){Laya.Browser.onAndroid&&(this.videoSuccess=e,this.videoError=t,this.videoCancel=i,window.loadingView.bridge.call("showRewardAd"))}VideoCallBack(e,t){switch(e){case 1:this.videoSuccess&&this.videoSuccess(t);break;case-1:this.videoError&&this.videoError(t);break;case 0:this.videoCancel&&this.videoCancel(t)}this.videoSuccess=null,this.videoError=null,this.videoCancel=null}};class V extends o{constructor(e){super(e),this.isTest=!1,this.startClickTime=0}start(){super.start()}init(){this.scene=new r.MainViewUI,this.isTest=S.Ins.dicConfig[s.QCfgType.GameConfig].Is_Debug,this.scene.musicOff.visible=!p.Ins.musicSwitch,this.scene.musicBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),p.Ins.SwitchSound(),this.scene.musicOff.visible=!p.Ins.musicSwitch}),this.scene.startBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),Laya.Browser.now()-this.startClickTime<=1e3||(this.startClickTime=Laya.Browser.now(),P.Ins.removeUI(P.UI_MainView),P.Ins.createUI(P.UI_GameView))}),this.scene.lvlNum.text=String(g.Ins.level),L.Ins.showEnterDancing(),p.Ins.PlayMusic(),x.showNativeAd();let t=this.scene.InstreamBox,i=Laya.Browser.clientWidth/e.width;x.showInstream(t.left,t.top,i)}refreshLevel(){this.scene.lvlNum.text=String(g.Ins.level)}registerEvent(){t.Ins.on(i.REFRESH_LEVEL,this.refreshLevel,this)}unregisterEvent(){t.Ins.off(i.REFRESH_LEVEL,this.refreshLevel,this)}destroy(){x.hideNativeAd(),x.hideInstream(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this)}setParam(e){}}window.wx;class A extends o{constructor(e){super(e),this.progress=null,this.progressLimit=.99,this.deltaTime=1/60}start(){super.start()}init(){this.scene=new r.LoadingViewUI;this.progress=0,Laya.timer.frameLoop(1,this,this.doProgress)}registerEvent(){}unregisterEvent(){}destroy(){super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this),a.Ins.clearLoadingRes()}setParam(e){}doProgress(){this.progress<this.progressLimit?this.progress=Math.min(this.progressLimit+.001,this.progress+.3*this.deltaTime):F.Ins.allResLoadFinished?this.progress+=.55*this.deltaTime:this.progress=Math.min(this.progressLimit,this.progress+.01*this.deltaTime),this.progress<=1&&(this.scene.percentText.changeText(Math.ceil(100*this.progress)+"%"),this.scene.percentText.x=626*this.progress-26),this.progress>=1&&(P.Ins.removeUI(P.UI_LoadingView,!0),P.Ins.createUI(P.UI_MainView)),this.scene.progress.value=this.progress}}class E extends Laya.Script3D{constructor(){super(),this.gravityTime=50,this.life=150,this.dir=new Laya.Vector3,this.speedMulti=20,this.speed=new Laya.Vector3,this.positionIndex=0}onAwake(){this.bullet=this.owner,this.rig=this.bullet.getComponent(Laya.Rigidbody3D),this.rig.ccdMotionThreshold=1e-5,this.rig.mass=3,this.rig.restitution=.5,this.rig.isKinematic=!0,2==g.Ins.level?this.positionIndex=g.Ins.level+g.Ins.subLevel-1:this.positionIndex=Math.round(4*(g.Ins.level-2)+g.Ins.subLevel)}setShootDir(e){Laya.Vector3.normalize(e,this.dir),Laya.Vector3.scale(this.dir,this.speedMulti,this.speed),this.bullet.getComponent(Laya.Rigidbody3D).isKinematic=!1,this.bullet.getComponent(Laya.Rigidbody3D).gravity=new Laya.Vector3(0,0,0),this.bullet.getComponent(Laya.Rigidbody3D).linearVelocity=this.speed}onUpdate(){this.life--,this.gravityTime--,this.gravityTime<0&&(this.bullet.getComponent(Laya.Rigidbody3D).gravity=new Laya.Vector3(0,-8,0)),0==this.life&&(t.Ins.dispatch(i.BULLET_DESTROY),this.bullet.transform.localPositionY<10*this.positionIndex&&this.bullet&&this.bullet.destroy())}onCollisionEnter(e){this.bullet.getComponent(Laya.Rigidbody3D).gravity=new Laya.Vector3(0,-8,0)}}var U;!function(e){e[e.Idle=0]="Idle",e[e.Teach=1]="Teach",e[e.Game=2]="Game",e[e.Win=3]="Win",e[e.Revive=4]="Revive"}(U||(U={}));class B extends Laya.Script3D{constructor(){super(),this.gravityTime=50,this.life=150,this.dir=new Laya.Vector3,this.speedMulti=20,this.speed=new Laya.Vector3,this.positionIndex=0}onAwake(){this.bullet=this.owner,this.rig=this.bullet.getComponent(Laya.Rigidbody3D),this.rig.ccdMotionThreshold=1e-5,this.rig.mass=1,this.rig.isKinematic=!0,2==g.Ins.level?this.positionIndex=g.Ins.level+g.Ins.subLevel-1:this.positionIndex=Math.round(4*(g.Ins.level-2)+g.Ins.subLevel)}setShootDir(e){Laya.Vector3.normalize(e,this.dir),Laya.Vector3.scale(this.dir,this.speedMulti,this.speed),this.bullet.getComponent(Laya.Rigidbody3D).isKinematic=!1,this.bullet.getComponent(Laya.Rigidbody3D).gravity=new Laya.Vector3(0,0,0),this.bullet.getComponent(Laya.Rigidbody3D).linearVelocity=this.speed}onUpdate(){this.life--,this.gravityTime--,this.gravityTime<0&&(this.bullet.getComponent(Laya.Rigidbody3D).gravity=new Laya.Vector3(0,-8,0)),0==this.life&&this.bullet.transform.localPositionY<10*this.positionIndex&&this.bullet&&this.bullet.destroy()}onDestroy(){}onCollisionEnter(e){let t=this.bullet.transform.localPosition.clone();L.Ins.useBomb(t),p.Ins.PlayAudio("bomb"),this.bullet&&this.bullet.destroy()}}class T{constructor(){this.adData=[],this.fullScreenAdData=[],this.adUrl="https://wxdc.u14.com/ad/App/Exchange/getExchangeIcons"}static get Ins(){return null==T._ins&&(T._ins=new T),T._ins}init(e=null){var t=new Laya.HttpRequest;t.http.timeout=1e4,t.once(Laya.Event.COMPLETE,this,this.completeHandler),t.once(Laya.Event.ERROR,this,this.errorHandler),t.on(Laya.Event.PROGRESS,this,this.processHandler),t.send(this.adUrl,"","GET","application/json",["Appid","wx81b8a0658bab1292"])}processHandler(e){}errorHandler(e){}completeHandler(e){try{this.adData=JSON.parse(e).data;for(let e=0;e<this.adData.length;e++){this.fullScreenAdData.push(this.adData[e]);for(let t=0;t<this.adData[e].icons.length;t++){let i=Object.assign({},this.adData[e]);i.icon=i.icons[t],this.fullScreenAdData.push(i)}}}catch(e){this.adData=[],this.fullScreenAdData=[]}}}class D extends o{constructor(e){super(e),this.startX=0,this.startY=0,this.startPosition=new Laya.Point(0,0),this.endX=0,this.endY=0,this.endPosition=new Laya.Point(0,0),this.deltaX=0,this.deltaY=0,this.isMouseDown=!1,this.gameState=U.Idle,this.startClickTime=0,this.breathEffect=new Laya.TimeLine,this.isTest=!1,this.isBombCoolDown=!1,this.deadEnemy=0,this.bulletNum=0,this.reviveCnt=3e3,this.isRevive=!1,this.angle=0,this.ray=new Laya.Ray(new Laya.Vector3,new Laya.Vector3),this.rayCastHit=new Laya.HitResult}start(){super.start()}init(){this.scene=new r.GameViewUI,x.showBannerAd(C.BANNER_SIZE_320_50);let a=this.scene.InstreamBox,o=Laya.Browser.clientWidth/e.width;x.showInstream(a.left,a.top,o),this.isTest=S.Ins.dicConfig[s.QCfgType.GameConfig].Is_Debug,this.scene.lvlNum.text=String(g.Ins.level),g.Ins.teachStep!==l.Finish&&2==g.Ins.level&&g.Ins.refreshTeachStep(l.SlideHorizon),n.Ins.getScreenHeight()/n.Ins.getScreenWidth()>1.8&&(this.scene.lvlBox.y+=50,this.scene.touchBtnShoot.height*=1.218,this.scene.touchBtnSlideH.height*=1.218,this.scene.touchBtnSlideV.height*=1.218),this.scene.bombIcon.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),this.isRevive||this.updateBomb(-1)}),this.scene.goldArc.on(Laya.Event.MOUSE_DOWN,this,()=>{L.Ins.changeSlingshot(c.Gold)}),this.scene.normalArc.on(Laya.Event.MOUSE_DOWN,this,()=>{L.Ins.changeSlingshot(c.Wood)}),this.scene.giftBtn.visible=!1,this.scene.giftBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),Laya.Browser.now()-this.startClickTime<=1e3||this.isRevive||(this.startClickTime=Laya.Browser.now(),P.Ins.createUI(P.UI_GiftView))}),this.scene.touchNode.on(Laya.Event.MOUSE_DOWN,this,e=>{console.log("game state: ",this.gameState),this.gameState==U.Game&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0,Laya.timer.frameLoop(1,this,this.viewPortChange))}),this.scene.touchNode.on(Laya.Event.MOUSE_UP,this,()=>{console.log("game state: ",this.gameState),this.gameState==U.Game&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),Math.abs(this.startPosition.x-this.endPosition.x)<3&&Math.abs(this.startPosition.y-this.endPosition.y)<3&&this.bulletNum>0&&(this.shootBullet(),L.Ins.cameraShake()),this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChange))}),this.scene.touchBtnShoot.on(Laya.Event.MOUSE_DOWN,this,e=>{this.gameState==U.Teach&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0)}),this.scene.touchBtnShoot.on(Laya.Event.MOUSE_UP,this,()=>{this.gameState==U.Teach&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),Math.abs(this.startPosition.x-this.endPosition.x)<3&&Math.abs(this.startPosition.y-this.endPosition.y)<3&&this.shootBullet(),this.isMouseDown=!1)}),this.scene.step1ShootBtn.on(Laya.Event.MOUSE_DOWN,this,e=>{this.gameState==U.Teach&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0)}),this.scene.step1ShootBtn.on(Laya.Event.MOUSE_UP,this,()=>{this.gameState==U.Teach&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),Math.abs(this.startPosition.x-this.endPosition.x)<3&&Math.abs(this.startPosition.y-this.endPosition.y)<3&&(console.log("click shoot"),this.shootBullet()),this.isMouseDown=!1)}),this.scene.step2ShootBtn.on(Laya.Event.MOUSE_DOWN,this,e=>{this.gameState==U.Teach&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0)}),this.scene.step2ShootBtn.on(Laya.Event.MOUSE_UP,this,()=>{this.gameState==U.Teach&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),Math.abs(this.startPosition.x-this.endPosition.x)<3&&Math.abs(this.startPosition.y-this.endPosition.y)<3&&(console.log("click shoot"),this.shootBullet()),this.isMouseDown=!1)}),this.scene.touchBtnSlideH.on(Laya.Event.MOUSE_DOWN,this,e=>{console.log("game state: ",this.gameState),this.gameState==U.Teach&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0,Laya.timer.frameLoop(1,this,this.viewPortChangeH))}),this.scene.touchBtnSlideH.on(Laya.Event.MOUSE_UP,this,()=>{console.log("game state: ",this.gameState),this.gameState==U.Teach&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChangeH))}),this.scene.touchBtnSlideV.on(Laya.Event.MOUSE_DOWN,this,e=>{console.log("game state: ",this.gameState),this.gameState==U.Teach&&(this.isMouseDown=!0,this.startPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,this.deltaX=this.deltaY=0,Laya.timer.frameLoop(1,this,this.viewPortChangeV))}),this.scene.touchBtnSlideV.on(Laya.Event.MOUSE_UP,this,()=>{console.log("game state: ",this.gameState),this.gameState==U.Teach&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.endPosition=new Laya.Point(Laya.stage.mouseX,Laya.stage.mouseY),this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChangeV))}),this.scene.bombEffect.width=this.scene.width,this.scene.touchBtnBulletNum.on(Laya.Event.MOUSE_DOWN,this,this.finishTeach),t.Ins.dispatch(i.UPDATE_SUBLEVEL),L.Ins.initLevel(),g.Ins.level>=2&&x.showInterstitialAd(),this.updateBullet(),this.scene.reviveCntDown.visible=!1,this.reviveCnt=3e3,this.checkBomb(),this.startCheckGift(),this.bombSke=new Laya.Skeleton,this.bombSke.load("UI/gameView/1.sk",Laya.Handler.create(this,()=>{this.bombSke.visible=!1})),this.scene.addChild(this.bombSke),this.bombSke.pos(this.scene.width/2,3*this.scene.height/4)}loadSkeComplete(e){this.bombSke=this.template_bomb.buildArmature(),this.scene.addChild(this.bombSke),this.bombSke.pos(this.scene.width/2,this.scene.height/2)}playBreath(){this.breathEffect.to(this.scene.giftBtn,{scaleX:1.2,scaleY:1.2},1500),this.breathEffect.to(this.scene.giftBtn,{scaleX:1,scaleY:1},1500),this.breathEffect.play(0,!0)}pauseBreath(){this.breathEffect&&this.breathEffect.pause()}startCheckGift(){Laya.timer.once(1e3,this,()=>{Laya.timer.frameLoop(1,this,this.checkGift),4!=g.Ins.level||0!=g.Ins.gift1Time||g.Ins.gift1Redeem||P.Ins.createUI(P.UI_GiftView),1!=g.Ins.subLevel||!g.Ins.gift1Redeem||g.Ins.gift2Show||g.Ins.gift2Redeem||(g.Ins.setGift2Show(),P.Ins.createUI(P.UI_GiftView))}),(g.Ins.gift1Redeem||g.Ins.bullet==h.gold)&&(this.scene.bulletIcon.skin="UI/gameView/黄金球兑换后.png")}checkGift(){if(g.Ins.gift1Redeem&&g.Ins.gift2Redeem)return this.scene.giftBtn.visible=!1,void Laya.timer.clear(this,this.checkGift);if(g.Ins.level<4)return this.scene.giftBtn.visible=!1,void Laya.timer.clear(this,this.checkGift);if(this.scene.giftBtn.visible=!0,g.Ins.gift1Redeem){if(!g.Ins.gift2Redeem){this.scene.giftBtn.skin="UI/giftView/次登礼包小.png";let e=Math.floor((new Date).getTime()/1e3);if(g.Ins.gift2Need-(e-g.Ins.gift2Time)<=0)return this.scene.giftBtn.skin="UI/giftView/次登礼包小有光效.png",this.scene.giftDesc.text="Claim",this.playBreath(),void Laya.timer.clear(this,this.checkGift);this.pauseBreath(),this.scene.giftDesc.text=n.Ins.getcount_downStr(g.Ins.gift2Need-(e-g.Ins.gift2Time))}}else{this.scene.giftBtn.skin="UI/giftView/回流礼包小.png";let e=Math.floor((new Date).getTime()/1e3);if(g.Ins.gift1Need-(e-g.Ins.gift1Time)<=0)return this.scene.giftBtn.skin="UI/giftView/回流礼包小有光效.png",this.scene.giftDesc.text="Claim",this.playBreath(),void Laya.timer.clear(this,this.checkGift);this.pauseBreath(),this.scene.giftDesc.text=n.Ins.getcount_downStr(g.Ins.gift1Need-(e-g.Ins.gift1Time))}}finishTeach(){g.Ins.refreshTeachStep(l.Finish),this.scene.step3.visible=!1,t.Ins.dispatch(i.UPDATE_SUBLEVEL),t.Ins.dispatch(i.GAMEVIEW_ENTER),Laya.timer.clear(this,this.finishTeach)}updateSubLevel(){if(this.deadEnemy=0,this.isRevive=!1,this.startCheckGift(),g.Ins.level<b?this.bulletNum=null===S.Ins.dicConfig[s.QCfgType.GameConfig].Bullet[g.Ins.level][g.Ins.subLevel-1]||this.isTest?999999:S.Ins.dicConfig[s.QCfgType.GameConfig].Bullet[g.Ins.level][g.Ins.subLevel-1]:this.bulletNum=this.isTest?99999999:S.Ins.dicConfig[s.QCfgType.GameConfig].Bullet[(g.Ins.level-3)%28+3][g.Ins.subLevel-1],g.Ins.teachStep==l.Finish)this.scene.normalLevel.visible=!0,this.scene.teach1.visible=!1,this.scene.teach2.visible=!1,this.scene.step3.visible=!1;else switch(this.gameState=U.Teach,g.Ins.teachStep){case l.Shoot:this.scene.normalLevel.visible=!1,this.scene.teach1.visible=!0,this.scene.teach2.visible=!1,this.scene.ani1.play();break;case l.SlideHorizon:this.scene.normalLevel.visible=!1,this.scene.teach1.visible=!1,this.scene.teach2.visible=!0,this.scene.step1.visible=!0,this.scene.step2.visible=!1,this.scene.step3.visible=!1,this.scene.step1Shoot.visible=!1,this.scene.step1Slide.visible=!0,this.scene.ani2.play();break;case l.SlideVerticle:this.scene.normalLevel.visible=!1,this.scene.teach1.visible=!1,this.scene.teach2.visible=!0,this.scene.step1.visible=!1,this.scene.step2.visible=!0,this.scene.step3.visible=!1,this.scene.step2Shoot.visible=!1,this.scene.step2Slide.visible=!0,this.scene.ani3.play();break;case l.BulletNum:this.scene.normalLevel.visible=!0,this.scene.teach1.visible=!1,this.scene.teach2.visible=!1,this.scene.step1.visible=!1,this.scene.step2.visible=!1,this.scene.step3.visible=!0,this.scene.ani4.play(),Laya.timer.once(3e3,this,this.finishTeach)}switch(g.Ins.subLevel){case 1:this.scene.lvl1To2.visible=!1,this.scene.lvl2To3.visible=!1,this.scene.lvl3To4.visible=!1,this.scene.lvl1.visible=!1,this.scene.lvl2.visible=!1,this.scene.lvl3.visible=!1,this.scene.lvl4.visible=!1;break;case 2:this.scene.lvl1To2.visible=!0,this.scene.lvl2To3.visible=!1,this.scene.lvl3To4.visible=!1,this.scene.lvl1.visible=!0,this.scene.lvl2.visible=!1,this.scene.lvl3.visible=!1,this.scene.lvl4.visible=!1;break;case 3:this.scene.lvl1To2.visible=!0,this.scene.lvl2To3.visible=!0,this.scene.lvl3To4.visible=!1,this.scene.lvl1.visible=!0,this.scene.lvl2.visible=!0,this.scene.lvl3.visible=!1,this.scene.lvl4.visible=!1;break;case 4:this.scene.lvl1To2.visible=!0,this.scene.lvl2To3.visible=!0,this.scene.lvl3To4.visible=!0,this.scene.lvl1.visible=!0,this.scene.lvl2.visible=!0,this.scene.lvl3.visible=!0,this.scene.lvl4.visible=!1}}viewPortChangeH(){this.isMouseDown&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.deltaX=this.endX-this.startX<0?0:this.endX-this.startX,this.deltaY=0,this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,L.Ins.gameArc.transform.localRotationEulerX=(L.Ins.gameArc.transform.localRotationEulerX+this.deltaY/5)%360,L.Ins.gameArc.transform.localRotationEulerX>80?L.Ins.gameArc.transform.localRotationEulerX=80:L.Ins.gameArc.transform.localRotationEulerX<-100&&(L.Ins.gameArc.transform.localRotationEulerX=-100),L.Ins.gameArc.transform.localRotationEulerY=(L.Ins.gameArc.transform.localRotationEulerY-this.deltaX/5)%360,(Laya.stage.mouseX>=Laya.stage.width||Laya.stage.mouseX<=0||Laya.stage.mouseY>=Laya.stage.height||Laya.stage.mouseY<=0)&&(this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChangeH)),L.Ins.gameArc.transform.localRotationEulerY<=0&&(L.Ins.gameArc.transform.localRotationEulerY=0,this.scene.step1Shoot.visible=!0,this.scene.step1Slide.visible=!1,this.scene.ani6.play(),Laya.timer.clear(this,this.viewPortChangeH)))}viewPortChangeV(){this.isMouseDown&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.deltaX=0,this.deltaY=this.endY-this.startY<0?0:this.endY-this.startY,this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,L.Ins.gameArc.transform.localRotationEulerX=(L.Ins.gameArc.transform.localRotationEulerX+this.deltaY/5)%360,L.Ins.gameArc.transform.localRotationEulerX>80?L.Ins.gameArc.transform.localRotationEulerX=80:L.Ins.gameArc.transform.localRotationEulerX<-100&&(L.Ins.gameArc.transform.localRotationEulerX=-100),L.Ins.gameArc.transform.localRotationEulerY=(L.Ins.gameArc.transform.localRotationEulerY-this.deltaX/5)%360,(Laya.stage.mouseX>=Laya.stage.width||Laya.stage.mouseX<=0||Laya.stage.mouseY>=Laya.stage.height||Laya.stage.mouseY<=0)&&(this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChangeV)),L.Ins.gameArc.transform.localRotationEulerX>=30&&(L.Ins.gameArc.transform.localRotationEulerX=30,this.scene.step2Shoot.visible=!0,this.scene.step2Slide.visible=!1,this.scene.ani7.play(),Laya.timer.clear(this,this.viewPortChangeV)))}viewPortChange(){this.isMouseDown&&(this.endX=Laya.stage.mouseX,this.endY=Laya.stage.mouseY,this.deltaX=this.endX-this.startX,this.deltaY=this.endY-this.startY,this.startX=Laya.stage.mouseX,this.startY=Laya.stage.mouseY,L.Ins.gameArc.transform.localRotationEulerX=(L.Ins.gameArc.transform.localRotationEulerX+this.deltaY/5)%360,L.Ins.gameArc.transform.localRotationEulerX>80?L.Ins.gameArc.transform.localRotationEulerX=80:L.Ins.gameArc.transform.localRotationEulerX<-100&&(L.Ins.gameArc.transform.localRotationEulerX=-100),L.Ins.gameArc.transform.localRotationEulerY=(L.Ins.gameArc.transform.localRotationEulerY-this.deltaX/5)%360,(Laya.stage.mouseX>=Laya.stage.width||Laya.stage.mouseX<=0||Laya.stage.mouseY>=Laya.stage.height||Laya.stage.mouseY<=0)&&(this.isMouseDown=!1,Laya.timer.clear(this,this.viewPortChange)))}registerEvent(){t.Ins.on(i.ENEMY_DEAD,this.checkFinish,this),t.Ins.on(i.BULLET_DESTROY,this.checkBullet,this),t.Ins.on(i.UPDATE_SUBLEVEL,this.updateSubLevel,this),t.Ins.on(i.UPDATE_BULLET,this.updateBullet,this),t.Ins.on(i.UPDATE_BOMB,this.checkBomb,this),t.Ins.on(i.RESTART,this.restartGame,this),t.Ins.on(i.REVIVE,this.reviveGame,this),t.Ins.on(i.GIFT_REDEEM,this.startCheckGift,this),t.Ins.on(i.GAMEVIEW_ENTER,this.finishEnter,this)}unregisterEvent(){t.Ins.off(i.ENEMY_DEAD,this.checkFinish,this),t.Ins.off(i.BULLET_DESTROY,this.checkBullet,this),t.Ins.off(i.UPDATE_SUBLEVEL,this.updateSubLevel,this),t.Ins.off(i.UPDATE_BULLET,this.updateBullet,this),t.Ins.off(i.UPDATE_BOMB,this.checkBomb,this),t.Ins.off(i.RESTART,this.restartGame,this),t.Ins.off(i.REVIVE,this.reviveGame,this),t.Ins.off(i.GIFT_REDEEM,this.startCheckGift,this),t.Ins.off(i.GAMEVIEW_ENTER,this.finishEnter,this)}finishEnter(){g.Ins.teachStep==l.Finish?this.gameState=U.Game:this.gameState=U.Teach}restartGame(){this.gameState=U.Game,this.reviveCnt=3e3,this.scene.reviveCntDown.visible=!1,t.Ins.dispatch(i.CLEAR_COLL),t.Ins.dispatch(i.UPDATE_SUBLEVEL),L.Ins.initLevel(),this.updateBullet()}reviveGame(){this.playBulletEffect(new Laya.Point(this.scene.width/2,this.scene.height/2),()=>{this.gameState=U.Game,this.reviveCnt=3e3,this.scene.reviveCntDown.visible=!1,this.bulletNum=S.Ins.dicConfig[s.QCfgType.GameConfig].Extra_Bullet,this.updateBullet()})}playBulletEffect(e=new Laya.Point(this.scene.width/2,this.scene.height/2),t=null){let i=3;for(let s=0;s<3;s++){let a=new Laya.Image("UI/gameView/球.png");a.width=38,a.height=38,a.anchorX=.5,a.anchorY=.5,a.pos(e.x,e.y),this.scene.addChild(a);let n=100*(s%3-1),o=100*(-1+Math.floor(s/3));Laya.Tween.to(a,{x:e.x+n,y:e.y+o},1e3-50*s,Laya.Ease.cubicInOut,Laya.Handler.create(this,()=>{Laya.Tween.to(a,{x:this.scene.bulletPos.x,y:this.scene.bulletPos.y,alpha:.5},1e3,Laya.Ease.cubicIn,Laya.Handler.create(this,()=>{a.destroy(),0===--i&&t&&t()}))}),50*s)}}updateBullet(){this.scene.bulletNum.text=String(this.bulletNum)}checkBomb(){if(g.Ins.bullet==h.bomb?(this.scene.bombEffect.visible=!0,this.scene.ani5.play()):(this.scene.bombEffect.visible=!1,this.scene.ani5.stop()),g.Ins.isBombCooldown){Math.floor((new Date).getTime()/1e3)-g.Ins.bombCooldown>=300?(g.Ins.setBombCoolDown(!1),g.Ins.addBomb(1),this.scene.bombNum.text=String(g.Ins.bomb),this.scene.bombDesc.text="Load",this.scene.bombCntBg.visible=!0):(Laya.timer.clear(this,this.bombCoolDown),Laya.timer.frameLoop(1,this,this.bombCoolDown))}g.Ins.bomb<=0&&!g.Ins.isBombCooldown&&(g.Ins.setBombCoolDown(!0),Laya.timer.clear(this,this.bombCoolDown),Laya.timer.frameLoop(1,this,this.bombCoolDown)),this.scene.bombNum.text=String(g.Ins.bomb),0==g.Ins.bomb?this.scene.bombCntBg.visible=!1:1==g.Ins.bomb?(this.scene.bombDesc.text="Load",this.scene.bombCntBg.visible=!0):(this.scene.bombCntBg.visible=!0,this.scene.bombDesc.text="Load")}updateBomb(e=-1){g.Ins.bullet!=h.bomb&&(g.Ins.bomb<=0&&g.Ins.checkTaskRemained(T.Ins.adData)?P.Ins.createUI(P.UI_FreeBombView):(g.Ins.addBomb(e),L.Ins.changeBullet(h.bomb),this.scene.bombEffect.visible=!0,this.scene.ani5.play(),g.Ins.bomb<=0&&(g.Ins.checkTaskRemained(T.Ins.adData)||!g.Ins.isBombCooldown&&(g.Ins.setBombCoolDown(!0),Laya.timer.clear(this,this.bombCoolDown),Laya.timer.frameLoop(1,this,this.bombCoolDown))),this.scene.bombNum.text=String(g.Ins.bomb),0==g.Ins.bomb?this.scene.bombCntBg.visible=!1:1==g.Ins.bomb?(this.scene.bombDesc.text="Load",this.scene.bombCntBg.visible=!0):(this.scene.bombCntBg.visible=!0,this.scene.bombDesc.text="Load")))}bombCoolDown(){let e=Math.floor((new Date).getTime()/1e3);this.scene.bombDesc.text=n.Ins.getcount_downStr(300-(e-g.Ins.bombCooldown)),e-g.Ins.bombCooldown>=300&&(g.Ins.setBombCoolDown(!1),g.Ins.addBomb(1),this.scene.bombNum.text=String(g.Ins.bomb),this.scene.bombDesc.text="Load",this.scene.bombCntBg.visible=!0,Laya.timer.clear(this,this.bombCoolDown))}checkFinish(e){this.deadEnemy+=e;let t=this;1==g.Ins.level?this.deadEnemy==L.Ins.enemyArr[g.Ins.subLevel-1]&&(t.gameState=U.Win,Laya.timer.clear(this,this.reviveCntDown),Laya.Tween.to(L.Ins.gameArc.transform,{localRotationEulerX:10},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{L.Ins.WinBomb(),t.gameState=U.Win,g.Ins.addLevel(1),g.Ins.refreshTeachStep(l.SlideHorizon),P.Ins.removeUI(P.UI_GameView),P.Ins.createUI(P.UI_WinView)}))):2==g.Ins.level?this.deadEnemy==L.Ins.enemyArr[g.Ins.subLevel-1]&&(t.gameState=U.Win,Laya.Tween.to(L.Ins.gameArc.transform,{localRotationEulerX:10},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{L.Ins.WinBomb(),t.gameState=U.Win,1==g.Ins.subLevel?(g.Ins.refreshTeachStep(l.SlideVerticle),g.Ins.addSubLevel(1)):2==g.Ins.subLevel&&(g.Ins.refreshSubLevel(),g.Ins.addLevel(1),this.finishTeach(),P.Ins.removeUI(P.UI_GameView),P.Ins.createUI(P.UI_WinView))}))):this.deadEnemy==L.Ins.enemyArr[g.Ins.subLevel-1]&&(t.gameState=U.Win,g.Ins.subLevel<4?Laya.Tween.to(L.Ins.gameArc.transform,{localRotationEulerX:10},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{L.Ins.WinBomb(),t.gameState=U.Win,g.Ins.addSubLevel(1)})):Laya.Tween.to(L.Ins.gameArc.transform,{localRotationEulerX:10},1e3,Laya.Ease.linearNone,Laya.Handler.create(this,()=>{L.Ins.WinBomb(),t.gameState=U.Win,g.Ins.addSubLevel(1),P.Ins.removeUI(P.UI_GameView),P.Ins.createUI(P.UI_WinView)})))}checkBullet(){this.deadEnemy!==L.Ins.enemyArr[g.Ins.subLevel-1]&&0==this.bulletNum&&this.gameState==U.Game&&(this.gameState=U.Idle,this.scene.reviveCntDown.visible=!0,p.Ins.PlayAudio("count_down"),this.scene.cntDownNum.text="3",this.isRevive=!0,Laya.timer.loop(100,this,this.reviveCntDown))}reviveCntDown(){if(this.gameState==U.Win)return this.scene.reviveCntDown.visible=!1,this.isRevive=!1,void Laya.timer.clear(this,this.reviveCntDown);this.reviveCnt-=100,2e3==this.reviveCnt&&(this.scene.cntDownNum.text="2"),1e3==this.reviveCnt&&(this.scene.cntDownNum.text="1"),this.scene.cntDownImg.pivotX=.5*this.scene.cntDownImg.width,this.scene.cntDownImg.pivotY=.5*this.scene.cntDownImg.height,this.scene.cntDownMask.x=this.scene.cntDownImg.pivotX,this.scene.cntDownMask.y=this.scene.cntDownImg.pivotY;let e=Math.max(this.scene.cntDownImg.width,this.scene.cntDownImg.height);this.angle=360*(1-this.reviveCnt/3e3),this.scene.cntDownMask.graphics.clear(!0),this.scene.cntDownMask.graphics.drawPie(0,0,e,360,this.angle,"#00ffff"),this.reviveCnt<=0&&(this.scene.cntDownNum.text="0",this.scene.reviveCntDown.visible=!1,this.isRevive=!1,Laya.timer.clear(this,this.reviveCntDown),P.Ins.createUI(P.UI_LoseView))}destroy(){x.hideBannerAd(),x.hideInstream(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){this.scene.reviveCntDown.visible=!1,Laya.timer.clearAll(this)}setParam(e){}shootBullet(){p.Ins.PlayAudio("emit");let e="Sphere001";switch(g.Ins.bullet){case h.normal:e="Sphere001";break;case h.gold:e="Sphere003";break;case h.bomb:e="Sphere002"}let s=Laya.TrailSprite3D.instantiate(L.Ins.bulletPrefab[e]),a=null;switch(g.Ins.bullet){case h.normal:case h.gold:a=s.addComponent(E);break;case h.bomb:a=s.addComponent(B)}s.transform.position=L.Ins.fakeBullet.transform.position,s.transform.localRotationEuler=new Laya.Vector3(0,90,0),s.transform.localScale=new Laya.Vector3(.3,.3,.3),L.Ins.fakeBullet.active=!1,Laya.timer.once(500,this,()=>{L.Ins.changeBullet(g.Ins.preBullet),L.Ins.fakeBullet.active=!0}),L.Ins.gameScene.addChild(s),L.Ins.gameCamera.viewportPointToRay(new Laya.Vector2(Laya.stage.mouseX,Laya.stage.mouseY),this.ray),this.rayCastHit=new Laya.HitResult,L.Ins.gameScene.physicsSimulation.rayCast(this.ray,this.rayCastHit,100);let n=new Laya.Vector3;if(this.rayCastHit.succeeded)Laya.Vector3.subtract(this.rayCastHit.point,s.transform.position,n);else{let e=new Laya.Vector3,t=new Laya.Vector3;Laya.Vector3.normalize(this.ray.direction,t),Laya.Vector3.scale(t,8,e);let i=new Laya.Vector3;Laya.Vector3.subtract(L.Ins.gameCamera.transform.position,s.transform.position,i),Laya.Vector3.add(e,i,n)}a.setShootDir(n),t.Ins.dispatch(i.UPDATE_SHOOT),this.bulletNum--,t.Ins.dispatch(i.UPDATE_BULLET)}}class k extends o{constructor(e){super(e),this.ReviveNum=5,this.restartClickTime=0,this.reviveClickTime=0}start(){super.start()}init(){x.showNativeAd(),this.ReviveNum=S.Ins.dicConfig[s.QCfgType.GameConfig].Revive_Cnt,this.scene=new r.LoseViewUI,this.scene.restartBtn.visible=!1,this.scene.recntDownNum.visible=!1,this.scene.reviveDesc.text="Add "+S.Ins.dicConfig[s.QCfgType.GameConfig].Extra_Bullet+" Bullets ？",Laya.timer.loop(1e3,this,()=>{this.ReviveNum--,3==this.ReviveNum&&(this.scene.restartBtn.visible=!0)}),this.scene.restartBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),Laya.Browser.now()-this.restartClickTime<=1e3||(this.restartClickTime=Laya.Browser.now(),P.Ins.removeUI(P.UI_LoseView),g.Ins.subLevel=1,t.Ins.dispatch(i.RESTART),g.Ins.level>=2&&k.i%2==0&&x.showInterstitialAd(),k.i++)}),this.scene.moreBulletBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Browser.now()-this.reviveClickTime<=1e3||(this.reviveClickTime=Laya.Browser.now(),p.Ins.PlayAudio("click"),x.playVideo(()=>{t.Ins.dispatch(i.REVIVE),P.Ins.removeUI(P.UI_LoseView)},null,null))})}registerEvent(){}unregisterEvent(){}destroy(){x.hideNativeAd(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this)}setParam(e){}}k.i=0;class N extends o{constructor(e){super(e),this.startClickTime=0}start(){super.start()}init(){this.scene=new r.WinViewUI,this.scene.lvlNum.text=String(g.Ins.level-1),this.scene.nextLvlNum.text=String(g.Ins.level),this.scene.nextBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Browser.now()-this.startClickTime<=1e3||(this.startClickTime=Laya.Browser.now(),p.Ins.PlayAudio("click"),P.Ins.removeUI(P.UI_WinView),P.Ins.createUI(P.UI_GameView))}),L.Ins.WinBomb(),x.showNativeAd()}registerEvent(){}unregisterEvent(){}destroy(){x.hideNativeAd(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this)}setParam(e){}}class R{constructor(){this.tips=new Laya.Label}showTips(t,i=2500){this.tips.width=n.Ins.getScreenWidth(),this.tips.y=n.Ins.getScreenHeight()/2,this.tips.scale(n.Ins.getScreenWidth()/e.width,n.Ins.getScreenHeight()/e.height),this.tips.color="#ffffff",this.tips.bgColor="#000000",this.tips.strokeColor="#120bcf",this.tips.fontSize=35,this.tips.stroke=3,this.tips.bold=!0,this.tips.align="center",this.tips.padding="20,35,20,35",this.tips.wordWrap=!0,this.tips.text=t,this.tips.cacheAs="bitmap",this.tips.alpha=.9,this.tips.zOrder=9999,Laya.stage.addChild(this.tips),Laya.Tween.to(this.tips,{alpha:0},i/2,null,Laya.Handler.create(this,()=>{this.tips.destroy()}),i/2)}}class _ extends o{constructor(e){super(e),this.isRedeem1=!1,this.isRedeem2=!1,this.startClickTime=0}start(){super.start()}init(){x.showNativeAd(),this.scene=new r.GiftViewUI,g.Ins.gift1Redeem&&!g.Ins.gift2Redeem?(this.scene.rookieGift.visible=!1,this.scene.rookieGift2.visible=!0):g.Ins.gift1Redeem||g.Ins.gift2Redeem||(this.scene.rookieGift.visible=!0,this.scene.rookieGift2.visible=!1),0==g.Ins.gift1Time&&g.Ins.setGift1Time(),g.Ins.gift1Redeem&&0==g.Ins.gift2Time&&g.Ins.setGift2Time(),this.scene.confirmBtn.on(Laya.Event.CLICK,this,()=>{p.Ins.PlayAudio("click"),Laya.Browser.now()-this.startClickTime<=1e3||(this.startClickTime=Laya.Browser.now(),this.isRedeem1?(g.Ins.setGift1Redeem(),L.Ins.changeBullet(h.gold),(new R).showTips("Congratulations on getting the golden ball"),t.Ins.dispatch(i.GIFT_REDEEM),P.Ins.removeUI(P.UI_GiftView)):g.Ins.gift1Sub?P.Ins.removeUI(P.UI_GiftView):window.wx||P.Ins.removeUI(P.UI_GiftView))}),this.scene.confirmBtn2.on(Laya.Event.CLICK,this,()=>{p.Ins.PlayAudio("click"),Laya.Browser.now()-this.startClickTime<=1e3||(this.startClickTime=Laya.Browser.now(),this.isRedeem2?(g.Ins.setGift2Redeem(),(new R).showTips("Congratulations on getting the golden slingshot"),L.Ins.changeSlingshot(c.Gold),t.Ins.dispatch(i.GIFT_REDEEM),P.Ins.removeUI(P.UI_GiftView)):g.Ins.gift2Sub?P.Ins.removeUI(P.UI_GiftView):window.wx||P.Ins.removeUI(P.UI_GiftView))}),Laya.timer.frameLoop(1,this,this.cntDownLoop)}cntDownLoop(){let e=Math.floor((new Date).getTime()/1e3);if(g.Ins.gift1Redeem){if(!g.Ins.gift2Redeem)if(g.Ins.gift2Need-(e-g.Ins.gift2Time)<=0)this.scene.gift2Need.text="Claim",this.isRedeem2=!0,this.scene.gift2Know.visible=!1,Laya.timer.clear(this,this.cntDownLoop);else{this.isRedeem2=!1,this.scene.gift2Know.visible=!0;let t=n.Ins.getcount_downStr(g.Ins.gift2Need-(e-g.Ins.gift2Time));this.scene.gift2Need.text="Get free bomb after "+t}}else if(g.Ins.gift1Need-(e-g.Ins.gift1Time)<=0)this.scene.gift1Need.text="Claim",this.isRedeem1=!0,this.scene.gift1Know.visible=!1,Laya.timer.clear(this,this.cntDownLoop);else{this.isRedeem1=!1,this.scene.gift1Know.visible=!0;let t=n.Ins.getcount_downStr(g.Ins.gift1Need-(e-g.Ins.gift1Time));this.scene.gift1Need.text="Get free bomb after "+t}}registerEvent(){}unregisterEvent(){}destroy(){x.hideNativeAd(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this)}setParam(e){}}class M extends o{constructor(e){super(e),this.freeBombTime=0}start(){super.start()}init(){x.showNativeAd(),this.scene=new r.FreeBombViewUI,this.scene.closeBtn.visible=!1,Laya.timer.once(2e3,this,()=>{this.scene.closeBtn.visible=!0}),this.scene.closeBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{p.Ins.PlayAudio("click"),P.Ins.removeUI(P.UI_FreeBombView)}),Laya.timer.frameLoop(1,this,this.updateDesc),this.scene.useBtn.on(Laya.Event.MOUSE_DOWN,this,()=>{Laya.Browser.now()-this.freeBombTime<=1e3||(this.freeBombTime=Laya.Browser.now(),p.Ins.PlayAudio("click"),x.playVideo(()=>{P.Ins.removeUI(P.UI_FreeBombView),L.Ins.changeBullet(h.bomb),g.Ins.setBombCoolDown(!0)},null,null))})}updateDesc(){let e=Math.floor((new Date).getTime()/1e3);e-g.Ins.bombCooldown>=600?(this.scene.desc.text="Get free bomb after 00:00",Laya.timer.clear(this,this.updateDesc)):this.scene.desc.text="Get free bomb after "+n.Ins.getcount_downStr(600-(e-g.Ins.bombCooldown))}registerEvent(){}unregisterEvent(){}destroy(){x.hideNativeAd(),super.destroy()}setActive(e){super.setActive(e)}postInit(){}doEnabled(){}doDisabled(){}doDestroy(){Laya.timer.clearAll(this)}setParam(e){}}class P{constructor(){this.listAllUI=null,this.listAllUI=[]}static get Ins(){return null==P._ins&&(P._ins=new P),P._ins}registerEvent(){}unregisterEvent(){}init(){}createUI(e,t=null){for(var i=!1,s=0;s<this.listAllUI.length;s++)if(this.listAllUI[s].uiName==e){i=!0;break}var a;if(!i){switch(e){case P.UI_LoadingView:a=new A(e);break;case P.UI_MainView:a=new V(e);break;case P.UI_GameView:a=new D(e);break;case P.UI_LoseView:a=new k(e);break;case P.UI_WinView:a=new N(e);break;case P.UI_GiftView:a=new _(e);break;case P.UI_FreeBombView:a=new M(e)}this.listAllUI.push(a)}n.Ins.isNullOrEmpty(a)||(a.start(),a.setParam(t),a.setActive(!0))}removeUI(e,t=!0){for(var i=0;i<this.listAllUI.length;i++)if(this.listAllUI[i].uiName==e){this.listAllUI[i].destroy(),this.listAllUI.splice(i,1);break}}getUI(e){for(var t=0;t<this.listAllUI.length;t++)if(this.listAllUI[t].uiName==e)return this.listAllUI[t]}removeAllUI(){for(var e=0;e<this.listAllUI.length;e++)this.removeUI(this.listAllUI[e].uiName)}}P.UI_LoadingView=0,P.UI_MainView=1,P.UI_GameView=2,P.UI_LoseView=3,P.UI_WinView=4,P.UI_MoreGameView=5,P.UI_GiftView=6,P.UI_CollectView=7,P.UI_RankView=8,P.UI_FreeBombView=9,P.UI_FullScreenAdView=10,P.UI_TaskAdView=11,P.UI_TestView=12;class F{constructor(){this.needLoadAllRes=null,this.loadedResType=null,this.allResLoadFinished=null,this.needLoadAllRes=!0,this.loadedResType=0,this.allResLoadFinished=!1}static get Ins(){return null==F._ins&&(F._ins=new F,F._ins.registerEvent()),F._ins}registerEvent(){t.Ins.on(i.RES_LOAD_FINISHED,this.resLoadFinishedHandler,this)}unregisterEvent(){t.Ins.off(i.RES_LOAD_FINISHED,this.resLoadFinishedHandler,this)}init(){g.Ins.initData(),a.Ins.loadLoadingRes(),a.Ins.loadLoadingRes(),p.Ins.init(),T.Ins.init(),t.Ins.dispatch(i.RES_LOAD_FINISHED,s.QResType.Subpackage)}isResLoadFinished(e){return 0!=(this.loadedResType&e)}resLoadFinishedHandler(e){e==s.QResType.LoadingViewRes?(console.log("create loading view"),P.Ins.createUI(P.UI_LoadingView)):e==s.QResType.Subpackage&&(S.Ins.loadAllCfg(),a.Ins.loadRes(),L.Ins.loadScene()),this.loadedResType|=e,this.isResLoadFinished(s.QResType.Config)&&this.isResLoadFinished(s.QResType.UIRes)&&this.isResLoadFinished(s.QResType.Scene3D)&&(this.allResLoadFinished=!0,this.loadedResType=0)}}window.JSAndroid=x,new class{constructor(){window.Laya3D?Laya3D.init(e.width,e.height):Laya.init(e.width,e.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=e.scaleMode,Laya.stage.screenMode=e.screenMode,Laya.stage.alignV=e.alignV,Laya.stage.alignH=e.alignH,Laya.URL.exportSceneToJson=e.exportSceneToJson,(e.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),e.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),e.stat&&Laya.Stat.show(),Laya.MouseManager.multiTouchEnabled=!1,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){F.Ins.init()}}}();