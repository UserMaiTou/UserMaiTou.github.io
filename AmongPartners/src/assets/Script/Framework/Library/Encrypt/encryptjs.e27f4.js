(function(r,e){"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):"function"==typeof define&&"object"==typeof define.petal?define("encryptjs",[],e):this.encryptjs=e()})(0,function(r){(r={version:"1.0.0"}).init=function(){console.log("--------------------Applying Encryption Algorithm------------------ ")};var e=window.Algo;r.encrypt=function(t,o,n){if(128!=n&&192!=n&&256!=n)return"";t=String(t).utf8Encode(),o=String(o).utf8Encode();for(var i=n/8,a=new Array(i),f=0;f<i;f++)a[f]=isNaN(o.charCodeAt(f))?0:o.charCodeAt(f);var c=e.cipher(a,e.keyExpansion(a));c=c.concat(c.slice(0,i-16));var d=new Array(16),h=(new Date).getTime(),u=h%1e3,p=Math.floor(h/1e3),s=Math.floor(65535*Math.random());for(f=0;f<2;f++)d[f]=u>>>8*f&255;for(f=0;f<2;f++)d[f+2]=s>>>8*f&255;for(f=0;f<4;f++)d[f+4]=p>>>8*f&255;var C="";for(f=0;f<8;f++)C+=String.fromCharCode(d[f]);for(var g=e.keyExpansion(c),l=Math.ceil(t.length/16),y=new Array(l),A=0;A<l;A++){for(var S=0;S<4;S++)d[15-S]=A>>>8*S&255;for(S=0;S<4;S++)d[15-S-4]=A/4294967296>>>8*S;var v=e.cipher(d,g),m=A<l-1?16:(t.length-1)%16+1,w=new Array(m);for(f=0;f<m;f++)w[f]=v[f]^t.charCodeAt(16*A+f),w[f]=String.fromCharCode(w[f]);y[A]=w.join("")}var E=C+y.join("");return r.base64Encode(E)},r.decrypt=function(t,o,n){if(128!=n&&192!=n&&256!=n)return"";t=r.base64Decode(String(t)),o=String(o).utf8Encode();for(var i=n/8,a=new Array(i),f=0;f<i;f++)a[f]=isNaN(o.charCodeAt(f))?0:o.charCodeAt(f);var c=e.cipher(a,e.keyExpansion(a));c=c.concat(c.slice(0,i-16));var d=new Array(8),h=t.slice(0,8);for(f=0;f<8;f++)d[f]=h.charCodeAt(f);for(var u=e.keyExpansion(c),p=Math.ceil((t.length-8)/16),s=new Array(p),C=0;C<p;C++)s[C]=t.slice(8+16*C,24+16*C);t=s;var g=new Array(t.length);for(C=0;C<p;C++){for(var l=0;l<4;l++)d[15-l]=C>>>8*l&255;for(l=0;l<4;l++)d[15-l-4]=(C+1)/4294967296-1>>>8*l&255;var y=e.cipher(d,u),A=new Array(t[C].length);for(f=0;f<t[C].length;f++)A[f]=y[f]^t[C].charCodeAt(f),A[f]=String.fromCharCode(A[f]);g[C]=A.join("")}var S=g.join("");return S.utf8Decode()};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return r.base64Encode=function(e){var o,n,i,a,f,c,d,h="",u=0;for(e=r._utf8_encode(e);u<e.length;)a=(o=e.charCodeAt(u++))>>2,f=(3&o)<<4|(n=e.charCodeAt(u++))>>4,c=(15&n)<<2|(i=e.charCodeAt(u++))>>6,d=63&i,isNaN(n)?c=d=64:isNaN(i)&&(d=64),h=h+t.charAt(a)+t.charAt(f)+t.charAt(c)+t.charAt(d);return h},r.base64Decode=function(e){var o,n,i,a,f,c,d="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)o=t.indexOf(e.charAt(h++))<<2|(a=t.indexOf(e.charAt(h++)))>>4,n=(15&a)<<4|(f=t.indexOf(e.charAt(h++)))>>2,i=(3&f)<<6|(c=t.indexOf(e.charAt(h++))),d+=String.fromCharCode(o),64!=f&&(d+=String.fromCharCode(n)),64!=c&&(d+=String.fromCharCode(i));return r._utf8_decode(d)},r._utf8_encode=function(r){r=r.replace(/\r\n/g,"\n");for(var e="",t=0;t<r.length;t++){var o=r.charCodeAt(t);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},r._utf8_decode=function(r){for(var e="",t=0,o=0,n=0;t<r.length;)(o=r.charCodeAt(t))<128?(e+=String.fromCharCode(o),t++):o>191&&o<224?(n=r.charCodeAt(t+1),e+=String.fromCharCode((31&o)<<6|63&n),t+=2):(n=r.charCodeAt(t+1),c3=r.charCodeAt(t+2),e+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&c3),t+=3);return e},r.getTextEncryptAndSaveToTextFile=function(){throw Error("Command line not supported on this platform")},r.getTextEncryptAndSaveToJSONFile=function(){throw Error("Command line not supported on this platform")},r.writeCipherTextToJSON=function(r,e,t,o){null==o&&(o=t,t={});var n="object"==typeof t&&null!==t&&"spaces"in t?t.spaces:this.spaces;try{JSON.stringify(e,t?t.replacer:null,n)}catch(i){if(o)return o(i,null)}},void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(r){return this}}),void 0===String.prototype.base64Encode&&(String.prototype.base64Encode=function(){if("undefined"!=typeof btoa)return btoa(this);if("undefined"!=typeof Buffer)return new Buffer(this,"utf8").toString("base64");throw new Error("No Base64 Encode")}),void 0===String.prototype.base64Decode&&(String.prototype.base64Decode=function(){if("undefined"!=typeof atob)return atob(this);if("undefined"!=typeof Buffer)return new Buffer(this,"base64").toString("utf8");throw new Error("No Base64 Decode")}),r.init(),r});